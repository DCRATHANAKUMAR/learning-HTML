var cxdClasses=cxdClasses||{};
(function(){cxdClasses.SearchPanelProxy=function(){var k=log4javascript.getLogger("SearchPanelProxy"),g=k.isDebugEnabled(),d=$("#searchpanel"),m;this.show=function(){m.show()};this.hide=function(){m.hide()};this.fit=function(){m.fit&&m.fit()};this.onPageAdded=function(d,e){if(m.onPageAdded)m.onPageAdded(d,e)};this.init=function(q){cxdCmp.config.getBooleanConfig("SERVER_MODE")?m instanceof cxdClasses.ServerSearchPanel||(m&&(m.hide(),m.destroy()),d.removeClass("defaultSearchPanel"),m=new cxdClasses.ServerSearchPanel,
g&&k.debug("ServerSearchPanel loaded.")):m instanceof cxdClasses.SearchPanel||(m&&(m.hide(),m.destroy()),d.addClass("defaultSearchPanel"),m=new cxdClasses.SearchPanel,g&&k.debug("SearchPanel loaded."));m.init(q)}}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.ServerSearchPanel=function(){function k(a,b){if("true"===x.attr("search-visible")){$(".currentPage").removeClass("currentPage");var h='.searchResultServer[pubId\x3d"'+cxdCmp.infra.getCurrentPubId()+'"][pageNo'+(0===a%2?"Right":"Left")+'\x3d"'+(a+1)+'"]',h=$(h).addClass("currentPage");b&&0!==h.length&&y.scrollTop(h[0].offsetTop-(cxdCmp.layout.getUsableHeight()-h.height())/2)}}function g(a,b){k(b,!0)}function d(a){a&&(B[0].value="",B.trigger("change"));J&&J.abort();y.html("");
m();e(!1,null,!1)}function m(){$(".searchResultLayer").remove()}function q(){y.find(".resultPageThumbContainer").on("click",function(){var a=$(this).closest(".searchResultServer"),b=a.attr("pageNoLeft")||a.attr("pageNoRight"),y=a.attr("pubId");v&&u.debug("Showing publication id "+y+", page No "+b+" from search result list.");"portrait"===x.attr("orientation")&&(l.hide(),cxdCmp.controller.fitAll(!1));cxdCmp.infra.getCurrentPubId()===y?cxdCmp.flipbook.showPageByIx(b-1):cxdCmp.turnPag.load(y,a.attr("pageLabelLeft")||
a.attr("pageLabelRight"))});y.find(".moreResultsBtn").on("click",function(a){$(this).addClass("displaynone").siblings(".moreResultsContainer").removeClass("displaynone");a.preventDefault();return!1});y.find(".lessResultsBtn").on("click",function(a){$(this).closest(".moreResultsContainer").addClass("displaynone").siblings(".moreResultsBtn").removeClass("displaynone")})}function e(a,b,y,h,c){l.searchInProgress=a;K.toggleClass("displaynone",!0!==c);A.toggleClass("enabled",!l.searchInProgress);a?(D.addClass("displaynone"),
G.removeClass("displaynone"),E.addClass("displaynone"),B.attr("disabled","disabled")):(B.removeAttr("disabled"),G.addClass("displaynone"),y?(D.addClass("displaynone"),(a=0<h)||E.html(M.replace("{0}",b)),E.attr("hasResults",a),E.toggleClass("displaynone",a||!0===c),a&&cxdCmp.layout.hasTouchSupport()?B.blur():B.focus()):(E.addClass("displaynone"),D.removeClass("displaynone")))}function f(a){return 3<a?O.replace("{0}",a-2):2<a?X:null}function c(a,b,y){a=100*b/a;return"width: "+a+"%; margin-left: "+(y?
100-a:"0")+"%;"}function t(a,b,y){a="width: "+50*b/a+"%;";return y?a+" position: absolute; right: 50%":a+" margin-left: 50%"}function n(a){for(var b,h,e,l,v,d,F,n,p,g,u=[],J=cxdCmp.config.getConfig("DATAPATH"),k=0;k<a.length;k++){b=a[k];l=b.numResults;h=b.maxPageWidth;v=b.thumbnailFileExt;e=b.publicationId;n=$;g=e;F=b.title;p=l;l=1===l?N:Y.replace("{0}",l);n=n(Z({pubId:g,title:F,numResults:p,numResultsLabel:l}));g=n.find(".pagePairResults");b=b.pagePairs;for(l=0;l<b.length;l++)d=b[l],p={pubId:e,matches:d.texts,
moreResultsBtnLabel:f(d.texts.length),pageNoLeft:null,pageNoRight:null,pageLabelLeft:null,pageLabelRight:null,imgSrcLeft:null,imgSrcRight:null,imgContainerClass:""},F=d.leftPage,d=d.rightPage,F&&(p.pageNoLeft=F.pageNo,p.pageLabelLeft=F.pageLabel,p.imgSrcLeft=J+e+cxdCmp.infra.THUMBS_PATH+F.pageId+v,d?p.imgStyleLeft=t(h,F.pageWidth,!0):(p.imgContainerClass="left",p.imgStyleLeft=c(h,F.pageWidth,!0))),d&&(p.pageNoRight=d.pageNo,p.pageLabelRight=d.pageLabel,p.imgSrcRight=J+e+cxdCmp.infra.THUMBS_PATH+d.pageId+
v,F?p.imgStyleRight=t(h,d.pageWidth,!1):(p.imgContainerClass="right",p.imgStyleRight=c(h,d.pageWidth,!1))),g.append(cxdCmp.searchCommon.searchResultTemplate(p));u.push(n)}var x=cxdCmp.infra.getCurrentPubId();u.sort(function(a,b){return w(a,b,x)});for(k=0;k<u.length;k++)y.append(u[k]);r()}function r(){y.children(".currentPublication").removeClass("currentPublication");y.children('.resultPublication[pubId\x3d"'+cxdCmp.infra.getCurrentPubId()+'"]').addClass("currentPublication")}function b(a,b){a.children(".searchResultLayer").remove();
var y=L,h=cxdCmp.infra.getCurrentPubId();if(y=y[h+"_"+b])for(var c=0;c<y.length;c++)h=y[c],a.append(aa({top:h.top,left:h.left,height:h.height,width:h.width}))}function a(){H.addClass("enabled");y.html("");m();L={};var a=B[0].value.trim();v&&u.debug('searching for "'+a+'" ...');e(!0);J=$.ajax({type:"GET",url:cxdCmp.infra.encodeUrl("search?text\x3d"+a+"\x26currentPubId\x3d"+cxdCmp.infra.getCurrentPubId()),dataType:"json",async:!0,cache:!1,success:function(y){H.removeClass("enabled");setTimeout(function(){J=
null;for(var h=y.results,c=0,l,d,f,F,p,t,g,w,r,x,m,H,D=cxdCmp.config.getConfigJsonPageThumbExt(),A,K,M,z,O=0;O<h.length;O++){l=h[O];d=0;c+=l.numResults;f=l.publicationId;l.thumbnailFileExt=l.thumbnailFileExt||D;F=l.pagePairs;for(z=0;z<F.length;z++){m=[];p=F[z];t=[p.leftPage,p.rightPage];for(A=0;A<t.length;A++)if(g=t[A]){H=[];w=g.results;g.pageLabel=g.pageLabel||g.pageNo;d=Math.max(d,g.pageWidth);for(M=0;M<w.length;M++)for(r=w[M].fragments,K=0;K<r.length;K++)x=r[K],m.push("..."+x.text+"..."),(x=x.boundingBox)&&
H.push(x);L[f+"_"+g.pageNo]=H}p.texts=m}l.maxPageWidth=d}v&&u.debug("search returned "+c+" results.");n(h);var h=I.turn("getPagesInMemory"),N;for(N in h)h.hasOwnProperty(N)&&b(h[N].children(".page"),N);e(!1,a,!0,c,!1);cxdCmp.analytics.trackSearchTerm(a,c);q();k(cxdCmp.flipbook.currentPageIx(),!0)},0)},error:function(b){J=null;"abort"===b.statusText?v&&u.debug("The search request for "+a+" has been aborted."):(cxdCmp.toast.checkAndShowOfflineToast(b),p&&u.error('Unable to perform search for search term "'+
a+'".'));b.responseJSON&&"SEARCH_TERM_TO_SHORT"===b.responseJSON.key?e(!1,a,!1,0,!1):e(!1,a,!0,0,!0)}})}function w(a,b,y){if(a.attr("pubId")===y)return-1;if(b.attr("pubId")===y)return 1;y=b.attr("numResults")-a.attr("numResults");return 0!==y?y:a.attr("pubTitle").localeCompare(b.attr("pubTitle"))}var l=this,u=log4javascript.getLogger("ServerSearchPanel"),v=u.isDebugEnabled();u.isInfoEnabled();var p=u.isErrorEnabled();this.searchInProgress=!1;var h=$(document),x=$("body"),A=$("#searchBtn"),z=$("#btnSearchPanel"),
C=$(".searchFeature"),B=$("#searchInput"),G=$("#searchInProgress"),E=$("#srLabel"),D=$("#searchTooShortLabel"),y=$("#searchResults"),F=$("#btnClearSearchInput"),H=$("#btnAbortSearch"),K=$("#searchErrorLabel"),I=$("#flipbook"),L={},J=null,M=cxdCmp.i18n.i18n("search.label.noResults"),N=cxdCmp.i18n.i18n("search.label.publication.numResults.singular"),Y=cxdCmp.i18n.i18n("search.label.publication.numResults.plural"),X=cxdCmp.i18n.i18n("search.server.additionalResults.singular"),O=cxdCmp.i18n.i18n("search.server.additionalResults.plural"),
Z=_.template('\x3cdiv class\x3d"resultPublication" pubId\x3d"\x3c%\x3d pubId %\x3e" pubTitle\x3d"\x3c%\x3d title %\x3e" numResults\x3d"\x3c%\x3d numResults %\x3e"\x3e\x3cdiv class\x3d"searchResultPubHeader"\x3e\x3cdiv class\x3d"searchResultPubIcon"\x3e\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" width\x3d"20px" height\x3d"20px" viewBox\x3d"0 0 20 20" xml:space\x3d"preserve"\x3e\x3cpath fill-opacity\x3d"0" d\x3d"M10.7,14.3C10.7,14.3,10.8,14.3,10.7,14.3C10.8,14.3,10.7,14.3,10.7,14.3z"\x3e\x3c/path\x3e\x3cpath opacity\x3d"0.4" d\x3d"M12.4,5c-0.6,0-1,0.1-1.3,0.3C11.5,5.1,12,5,12.4,5C12.5,5,12.5,5,12.4,5z"\x3e\x3c/path\x3e\x3cpath opacity\x3d"0.2" d\x3d"M9.6,14.5H10v-1.4v-0.2V6.5C10.1,6.5,9.6,5,7.7,5C6,5,4.6,6,3.5,6v8.7 c1.1,0,2.5-1,4.2-1C8.6,13.7,9.2,14.1,9.6,14.5z"\x3e\x3c/path\x3e\x3cpath d\x3d"M12.4,13.7c-0.8,0-1.3,0.3-1.7,0.6l0,0c-0.1,0.1-0.1,0.1-0.2,0.2H9.9H9.5c-0.3-0.4-1-0.8-1.9-0.8c-1.7,0-3.1,1-4.2,1V15v0.6 c1.1,0,2.7-1,4.2-1c1,0,1.5,0.4,1.9,0.8H10h0.4c0.3-0.4,1-0.8,1.9-0.8c1.7,0,3.1,1,4.2,1v-0.8v-0.1C15.6,14.7,14.1,13.7,12.4,13.7z"\x3e\x3c/path\x3e\x3cpath d\x3d"M11.1,5.3L11.1,5.3L11.1,5.3z"\x3e\x3c/path\x3e\x3cpath d\x3d"M12.8,5c-0.1,0-0.2,0-0.2,0l0,0C12.6,5,12.7,5,12.8,5L12.8,5z"\x3e\x3c/path\x3e\x3cpath opacity\x3d"0.4" d\x3d"M16.5,6c-0.8-0.1-2.1-0.9-3.7-1v0c-0.1,0-0.2,0-0.3,0c-0.5,0-1,0.1-1.4,0.3C10.3,5.8,10,6.5,10,6.5v6.3V13 v1.4h0.6c0.1-0.1,0.1-0.1,0.2-0.2c0.3-0.3,0.9-0.6,1.7-0.6c1.7,0,3.2,1,4.1,1L16.5,6L16.5,6z"\x3e\x3c/path\x3e\x3c/svg\x3e\x3c/div\x3e\x3cdiv class\x3d"searchResultPubInfo"\x3e\x3cdiv class\x3d"searchResultPubTitleContainer"\x3e\x3cspan class\x3d"searchResultPubTitle"\x3e\x3c%\x3d title %\x3e\x3c/span\x3e\x3cspan class\x3d"currentPubMark"\x3e ('+
cxdCmp.i18n.i18n("search.currentPublication")+')\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"searchResultPubNumResults"\x3e\x3c%\x3d numResultsLabel %\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"pagePairResults"\x3e\x3c/div\x3e\x3c/div\x3e'),aa=_.template('\x3cdiv class\x3d"pageLayer searchResultLayer" style\x3d"top: \x3c%\x3d top %\x3e; left: \x3c%\x3d left %\x3e; height: \x3c%\x3d height %\x3e; width: \x3c%\x3d width %\x3e;"\x3e\x3c/div\x3e');this.show=function(){x.attr("search-visible",
"true");z.attr("on","true");0===B.val().length&&B.focus();setTimeout(function(){l.fit(!0)},0)};this.hide=function(){x.attr("search-visible","false");z.attr("on","false");B.blur()};this.destroy=function(){h.off("pageChange",void 0,g);E.removeClass("displaynone");d(!0)};this.fit=function(a){k(cxdCmp.flipbook.currentPageIx(),a)};this.onPageAdded=function(a,y){b(a,y)};this.init=function(a,b){cxdCmp.layout.activateSidebarFeature(C,!0);var h=cxdCmp.infra.getCurrentPubId(),c=y.children(".resultPublication").sort(function(a,
b){return w($(a),$(b),h)});y.append(c);r()};(function(){B.off("keydown").on("keydown",function(b){l.searchInProgress||13!==b.keyCode||(a(),b.preventDefault())});A.off("click").on("click",function(){l.searchInProgress||a()});F.off("click").on("click",function(){d(!0)});H.off("click").on("click",function(){J&&d(!1)});B.off("input change paste").on("input change paste",function(a){F.toggleClass("displaynone",0===B.val().length);A.toggleClass("enabled",!l.searchInProgress)});h.on("pageChange",void 0,
g)})();E.addClass("displaynone");D.html(cxdCmp.i18n.i18n("search.label.tooShort.alphanum"))}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.ThumbsPanel=function(){function k(a){if(a=cxdCmp.infra.sectionById(a.attr("data-section"))){t(a);var b=a.id;$('.sectionThumbs[data-section\x3d"'+b+'"]').removeClass("displaynone");$('h3[data-section\x3d"'+b+'"] \x3e .sectionExpandBtn').addClass("displaynone");$('h3[data-section\x3d"'+b+'"] \x3e .sectionCollapseBtn').removeClass("displaynone");$('.subSection[data-section\x3d"'+b+'"]').removeClass("displaynone");$('.subSection[data-parentSection\x3d"'+b+'"]').removeClass("displaynone");
if(a=a.parentSectionId)(b=cxdCmp.infra.sectionById(a))&&t(b),$('.sectionThumbs[data-section\x3d"'+a+'"]').removeClass("displaynone"),$('.subSection[data-parentSection\x3d"'+a+'"]').removeClass("displaynone"),$('h3[data-section\x3d"'+a+'"] \x3e .sectionExpandBtn').addClass("displaynone"),$('h3[data-section\x3d"'+a+'"] \x3e .sectionCollapseBtn').removeClass("displaynone")}}function g(){$(".sectionThumbs").addClass("displaynone");$(".sectionExpandBtn").removeClass("displaynone");$(".sectionCollapseBtn").addClass("displaynone");
$(".subSection").addClass("displaynone")}function d(y,h){if("true"===v.attr("thumbs-visible")){a&&b.debug("pageChange detected");h&&(g(),k($('.sectionHead[data-section\x3d"'+cxdCmp.infra.getPages()[y].sectionId+'"]')));var c=$(".pgThumbContainer");c.removeClass("current");c.children("img[data-pageix\x3d"+y+"]").parent().addClass("current");h&&m(y)}}function m(a){"true"===p.attr("pagethumbs-visible")&&(a=$(".pgThumbContainer.current"),a.closest(".sectionThumbs").hasClass("displaynone")||h.scrollTop(a[0].offsetTop-
(cxdCmp.layout.getUsableHeight()-a.height())/2))}function q(a,b){d(b,!0)}function e(){A.attr("active","false");z.attr("active","true");p.attr("pagethumbs-visible","true")}function f(){A.attr("active","true");z.attr("active","false");p.attr("pagethumbs-visible","false")}function c(){$(".pgThumbContainer").off("click").on("click",function(){var h=$(this).find(".thumbImage").first(),c=h.attr("data-pageix");a&&b.debug("thumb click select "+c);"portrait"===v.attr("orientation")&&(r.hide(),cxdCmp.controller.fitAll(!1));
cxdCmp.flipbook.showPageByIx(c);cxdCmp.analytics.isTrackingEnabled()&&(h=h.parents(".pgThumbele").children(".thumbTitle").text(),cxdCmp.analytics.trackPageThumbClick(h))});$(".sectionHead").off("click").on("click",function(a){var b=$(this).attr("data-section");a=$('.thumbImage[data-Section\x3d"'+b+'"]').first().attr("data-pageix");if(!a)for(var b=cxdCmp.infra.sectionById(b),h=b.subSectionIds,c=0;c<h.length&&!(b=cxdCmp.infra.sectionById(h[c]),a=$('.thumbImage[data-Section\x3d"'+b.id+'"]').first().attr("data-pageix"));c++);
"portrait"===v.attr("orientation")&&"true"===A.attr("active")&&(r.hide(),cxdCmp.controller.fitAll(!1));a&&cxdCmp.flipbook.showPageByIx(a)});$(".sectionExpandBtn").off("click").on("click",function(a){a.stopImmediatePropagation();g();k($(this).parent())});$(".sectionCollapseBtn").off("click").on("click",function(a){a.stopImmediatePropagation();a=$(this).parent().attr("data-section");$('h3[data-section\x3d"'+a+'"] \x3e .sectionExpandBtn').removeClass("displaynone");$('h3[data-section\x3d"'+a+'"] \x3e .sectionCollapseBtn').addClass("displaynone");
$('.sectionThumbs[data-section\x3d"'+a+'"]').addClass("displaynone");$('.subSection[data-parentSection\x3d"'+a+'"]').addClass("displaynone");$('.subSection[data-parentSection\x3d"'+a+'"] \x3e .sectionExpandBtn').addClass("displaynone");$('.subSection[data-parentSection\x3d"'+a+'"] \x3e .sectionCollapseBtn').removeClass("displaynone");if(a=cxdCmp.infra.sectionById(a)){a=a.subSectionIds;for(var b=0;b<a.length;b++)$('.sectionThumbs[data-section\x3d"'+a[b]+'"]').addClass("displaynone")}});A.off("click").on("click",
function(){"false"===A.attr("active")&&(f(),d(cxdCmp.flipbook.currentPageIx(),!0))});z.off("click").on("click",function(){"false"===z.attr("active")&&(e(),d(cxdCmp.flipbook.currentPageIx(),!0))});u.on("pageChange",void 0,q)}function t(h){function c(h){var y=cxdCmp.infra.encodeUrl(l+h.id+e);a&&b.debug("thumbUrl ("+h+") \x3d "+y);return y}var l=cxdCmp.config.getConfig("DATAPATH")+cxdCmp.infra.getCurrentPubId()+cxdCmp.infra.THUMBS_PATH,e=cxdCmp.config.getConfig("PAGETHUMB_EXT");h=$('img.thumbImage[data-section\x3d"'+
h.id+'"]');var d=cxdCmp.infra.getPages(),v=h.length,f;h.each(function(){f=$(this);f.attr("src")||(f.on("load",function(){0===--v&&m(cxdCmp.flipbook.currentPageIx())}),f.attr("src",c(d[f.attr("data-pageix")])))})}function n(a,b){function c(a,b){var h=a===v.length-1||v[a+1].sectionId!==b.id;return(0===a||v[a-1].sectionId!==b.id)&&0===a%2||h&&1===a%2}function e(a,b,h){a=100*b/a;return"width: "+a+"%; margin-left: "+(h?100-a:"0")+"%;"}function d(a,b,h){a="width: "+50*b/a+"%;";return h?a+" position: absolute; right: 50%":
a+" margin-left: 50%"}var f=cxdCmp.infra.getPageSize().width,v=cxdCmp.infra.getPages(),p=a,t=b.parentSectionId,g='\x3cdiv class\x3d"sectionThumbs displaynone'+(t?" subSection":"")+'" data-section\x3d'+b.id+"\x3e\x3c/div\x3e";$(g).appendTo(h);for(var n=$('.sectionThumbs[data-section\x3d"'+b.id+'"]');a<v.length&&v[a].sectionId===b.id;)c(a,b)?(g=1===a%2,g=E({rlc:g?"left":"right",pageLabel:v[a].label,sectionId:b.id,style:e(f,v[a].pageWidth,g),pageix:a++})):g=D({sectionId:b.id,styleLeft:d(f,v[a].pageWidth,
!0),pageLabel1:v[a].label,pageix1:a++,styleRight:d(f,v[a].pageWidth,!1),pageLabel2:v[a].label,pageix2:a++}),$(g).appendTo(n);f=a-p;t?n.before(G({sectionName:"\x26#x21B3; "+b.name,sectionId:b.id,parentSectionId:t,pgInSectionLabel:"("+f+" "+(1===f?w:l)+")"})):n.before(B({sectionName:b.name,sectionId:b.id,pgInSection:f,pgInSectionLabel:"("+f+" "+(1===f?w:l)+")",additionalClass:0===b.subSectionIds.length?"noSubSections":""}));return a}var r=this,b=log4javascript.getLogger("ThumbsPanel"),a=b.isDebugEnabled(),
w=cxdCmp.i18n.i18n("label.page"),l=cxdCmp.i18n.i18n("label.pages"),u=$(document),v=$("body"),p=$("#thumbspanel"),h=$("#tpContainer"),x=$("#btnThumbsPanel"),A=$("#btnHidePagethumbs"),z=$("#btnShowPagethumbs"),C=$(".thumbspanelFeature");$("#flipbook");var B=_.template('\x3ch3 class\x3d"sectionHead \x3c%\x3dadditionalClass %\x3e" data-section\x3d"\x3c%\x3dsectionId %\x3e"\x3e\x3cspan class\x3d"sectionExpandBtn activatable easing" title\x3d"'+cxdCmp.i18n.i18n("thumbspanel.section.expand")+'"\x3e\x3c/span\x3e\x3cspan class\x3d"sectionCollapseBtn easing activatable displaynone" title\x3d"'+
cxdCmp.i18n.i18n("thumbspanel.section.collapse")+'"\x3e\x3c/span\x3e\x3c%\x3d sectionName%\x3e\x3csmall data-pgInSection\x3d"\x3c%\x3dpgInSection %\x3e"\x3e \x3c%\x3d pgInSectionLabel%\x3e\x3c/small\x3e\x3c/h3\x3e'),G=_.template('\x3ch3 class\x3d"sectionHead subSection displaynone" data-section\x3d"\x3c%\x3dsectionId %\x3e" data-parentSection\x3d"\x3c%\x3dparentSectionId %\x3e"\x3e\x3cspan class\x3d"sectionExpandBtn activatable easing" title\x3d"'+cxdCmp.i18n.i18n("thumbspanel.section.expand")+'"\x3e\x3c/span\x3e\x3cspan class\x3d"sectionCollapseBtn easing activatable displaynone" title\x3d"'+
cxdCmp.i18n.i18n("thumbspanel.section.collapse")+'"\x3e\x3c/span\x3e\x3c%\x3d sectionName%\x3e\x3csmall\x3e \x3c%\x3d pgInSectionLabel%\x3e\x3c/small\x3e\x3c/h3\x3e'),E=_.template('\x3cdiv class\x3d"pgThumbele \x3c%\x3d rlc %\x3e" data-section\x3d"\x3c%\x3dsectionId %\x3e"\x3e\x3cdiv class\x3d"pgThumbContainer activatable easing"\x3e\x3cimg class\x3d"thumbImage" data-section\x3d"\x3c%\x3dsectionId %\x3e" data-pageix\x3d"\x3c%\x3dpageix %\x3e" style\x3d"\x3c%\x3dstyle %\x3e" cxdCmp.toast.checkAndShowOfflineToast()/\x3e\x3cspan class\x3d"pageLabel \x3c%\x3d rlc %\x3e easing"\x3e\x3c%\x3d pageLabel %\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e'),
D=_.template('\x3cdiv class\x3d"pgThumbele" data-section\x3d"\x3c%\x3dsectionId %\x3e"\x3e\x3cdiv class\x3d"pgThumbContainer activatable easing"\x3e\x3cimg class\x3d"thumbImage" data-section\x3d"\x3c%\x3dsectionId %\x3e" data-pageix\x3d"\x3c%\x3dpageix1 %\x3e" style\x3d"\x3c%\x3dstyleLeft %\x3e" cxdCmp.toast.checkAndShowOfflineToast()/\x3e\x3cspan class\x3d"pageLabel left easing"\x3e\x3c%\x3d pageLabel1 %\x3e\x3c/span\x3e\x3cimg class\x3d"thumbImage" data-section\x3d"\x3c%\x3dsectionId %\x3e" data-pageix\x3d"\x3c%\x3dpageix2 %\x3e" style\x3d"\x3c%\x3dstyleRight %\x3e" cxdCmp.toast.checkAndShowOfflineToast()/\x3e\x3cspan class\x3d"pageLabel right easing"\x3e\x3c%\x3d pageLabel2 %\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e');
this.destroy=function(){$(".thumbImage").off("click");$(".sectionHead").off("click");$(".sectionExpandBtn").off("click");$(".thumbImage").off("load");u.off("pageChange",void 0,q);h.html("")};this.show=function(){x.attr("on","true");v.attr("thumbs-visible","true")};this.hide=function(){x.attr("on","false");v.attr("thumbs-visible","false")};this.fit=function(a){d(cxdCmp.flipbook.currentPageIx(),a)};(function(){if(0===h.children().length){var a=cxdCmp.config.getBooleanConfig("HIDE_THUMBSPANEL");cxdCmp.layout.activateSidebarFeature(C,
!a);if(!a){for(var b=0,v,d,p=cxdCmp.infra.getSections(),g=0;g<p.length;g++)d=p[g],a=n(b,d),v&&d.parentSectionId?(d=a-b,b=$('.sectionHead[data-section\x3d"'+v.id+'"] \x3e small'),d=parseInt(b.attr("data-pgInSection"),10)+d,b.attr("data-pgInSection",d),b.text(" ("+d+" "+(1===d?w:l)+")")):v=d,b=a;c();cxdCmp.config.getBooleanConfig("HIDE_PAGETHUMBS_INITIALLY")?f():e()}}})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Toast=function(){function k(a){return a&&cxdCmp.config.getBooleanConfig("SERVER_MODE")&&cxdCmp.config.getBooleanConfig("LOGGED_IN")&&(a=a.status,401===a||403===a)?(window.location.reload(),!0):!1}function g(){clearTimeout(u);f.removeClass("zeroOpacity");u=setTimeout(function(){f.addClass("zeroOpacity")},8E3);n=!0}var d=log4javascript.getLogger("Toast"),m=d.isDebugEnabled(),q=$("#errorToast"),e=$("#errorToastText"),f=$("#keyboardHelpToast"),c=cxdCmp.layout.isMobileBrowser(),
t=0,n=!1,r=!1,b=!1,a=null,w=!1,l=null,u=null;this.showLoadingFailedToast=function(a){k(a)||(a=cxdCmp.i18n.i18n("toast.loadingFailed.text"),"toast.loadingFailed.text"===a&&(a="An error occurred while loading required data. Please check your internet connection and reload this page."),w=!0,clearTimeout(l),e.html(a),q.removeClass("zeroOpacity"))};this.showNoPublicationsToast=function(a){k(a)||(w=!0,clearTimeout(l),e.html(cxdCmp.i18n.i18n("toast.noPublications.text")),q.removeClass("zeroOpacity"))};this.checkAndShowOfflineToast=
function(b){k(b)||w||!(b&&0===b.status||!1===navigator.onLine)||(m&&d.debug("Detected offline status. Showing toast..."),null===a&&(a=cxdCmp.i18n.i18n("toast.offline.text")),e.html(a),q.removeClass("zeroOpacity"),clearTimeout(l),l=setTimeout(function(){q.addClass("zeroOpacity")},8E3))};this.onZoomButtonUsed=function(){n||c||b||w||g()};this.onZoomMouswheelUsed=function(){b=!0};this.onPrevNextKeyboardUsed=function(){r=!0};this.onPrevNextButtonUsed=function(){n||c||r||w||3!==++t||g()}}})();
cxdClasses=cxdClasses||{};
(function(){cxdClasses.TurnPag=function(){function k(){$("img").off("dragstart").on("dragstart",function(a){a.preventDefault()})}function g(){if(cxdCmp.layout.hasTouchSupport()){var a=$(".activatable");a.off("touchstart").on("touchstart",function(){$(this).addClass("active")},{passive:!0});a.off("touchend").on("touchend",function(){$(this).removeClass("active")})}}function d(){$.ajax({type:"GET",url:"credits.html",dataType:"html",async:!0,cache:!1,success:function(a){b.html(a)},error:function(a){cxdCmp.toast.checkAndShowOfflineToast(a);
e&&m.error('The "credits.html" could not be loaded.')}})}var m=log4javascript.getLogger("TurnPag"),q=m.isDebugEnabled(),e=m.isErrorEnabled(),f=this,c=$("html"),t=$("head title"),n=$("header");$("#printSavePanel");var r=$("#pagegallery");$("#searchpanel");var b=$("#creditsText");this.load=function(a,b,c){cxdCmp.loadingMask.show();q&&m.debug("Init TurnPag "+a);cxdCmp.thumbsPanel&&(cxdCmp.thumbsPanel.destroy(),cxdCmp.thumbsPanel=null);cxdCmp.pageGallery&&(cxdCmp.pageGallery.destroy(),cxdCmp.pageGallery=
null);cxdCmp.flipbook&&(cxdCmp.flipbook.destroy(),cxdCmp.flipbook=null);null===a||void 0===a?($("#mainmenu li:not(.btnLogoutItem), .pagejumper, #btn-prev, #btn-next").addClass("displaynone"),cxdCmp.toast.showNoPublicationsToast(),cxdCmp.loadingMask.hide()):cxdCmp.dp.processManifest(a,b,c)};this.onSectionsLoaded=function(a,b,c){cxdCmp.loadingMask.sectionsLoaded();cxdCmp.infra.setCurrentPubId(a);cxdCmp.styling.setUp();cxdCmp.publicationsPanel.init(a,c);a:{if(null!==b&&(b=cxdCmp.infra.getPageIxByPageLabel(b),
void 0!==b)){b+=1;break a}b=1}cxdCmp.searchPanel.init(a,b);cxdCmp.flipbook=new cxdClasses.Flipbook;cxdCmp.flipbook.init(b);cxdCmp.thumbsPanel=new cxdClasses.ThumbsPanel;cxdCmp.printSavePanel.reinitialize(a);cxdCmp.dialog.init(c);cxdClasses.PageGallery&&0!==r.length&&(cxdCmp.pageGallery=new cxdClasses.PageGallery);g();k();cxdCmp.controller.fitAll(!1);cxdCmp.loadingMask.hide()};this.onLoggingLoaded=function(){cxdCmp.loadingMask.logConfigLoaded();cxdCmp.analytics=new cxdClasses.AnalyticsHelper;cxdCmp.i18n=
new cxdClasses.I18n};this.onI18nLoaded=function(){n.removeClass("hidden");cxdCmp.loadingMask.i18nLoaded();cxdCmp.dialog=new cxdClasses.Dialog;cxdCmp.searchCommon=new cxdClasses.SearchCommon;cxdCmp.styling=new cxdClasses.Styling};this.onCustomCssTemplateLoaded=function(){cxdCmp.loadingMask.customCssTemplateLoaded();cxdCmp.config=new cxdClasses.Config};this.onConfigLoaded=function(){cxdCmp.loadingMask.configLoaded();cxdCmp.controller=new cxdClasses.Controller;cxdCmp.dp=new cxdClasses.DataProvider;var a=
cxdCmp.config.getConfig("APPLICATION_TITLE");"string"===typeof a&&0<a.length&&t.html(a)};this.onPublicationsLoaded=function(){cxdCmp.loadingMask.publicationsLoaded();cxdCmp.publicationsPanel=new cxdClasses.PublicationPanelProxy;cxdCmp.printSavePanel=new cxdClasses.PrintSavePanel;cxdCmp.searchPanel=new cxdClasses.SearchPanelProxy;var a=cxdCmp.config.getPublicationId();null===a&&cxdCmp.config.getBooleanConfig("MULTI_TENANT_MODE")?c.html("pub parameter is required in multi-tenant mode."):null===a||cxdCmp.infra.pubIdExists(a)?
f.load(a||cxdCmp.infra.getPubIdWithLatestPubDate()||cxdCmp.infra.getFirstPubId(),cxdCmp.config.getPage(),!0):c.html("pub parameter is invalid.")};this.init=function(){cxdCmp.loadingMask=new cxdClasses.LoadingMask;cxdCmp.loadingMask.show();cxdCmp.layout=new cxdClasses.Layout;cxdCmp.toast=new cxdClasses.Toast;cxdCmp.infra=new cxdClasses.Marjorie;cxdCmp.logging=new cxdClasses.Logging;cxdCmp.ads=new cxdClasses.Ads;d()}}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Flipbook=function(){function k(a,b){var h=$("\x3cdiv/\x3e");t&&f.info("Call to add page nr "+a);l.turn("addPage",h,a);var d=a-1,e=cxdCmp.infra.getPages();if(d<e.length){var p=e[d];if(p){d=p.id;p.pageWidth!==b&&h.addClass("own-ratio").attr("ratio",p.ratio);t&&f.info("Add Page Nr "+a+"("+d+")");var e=cxdCmp.config.getConfig("DATAPATH")+cxdCmp.infra.getCurrentPubId(),v=$(L({id:p.id})),p=v.children(".imageLayer");p.on("load error remove",function(){v.children(".pageLoadingAnimation").remove()});
p.attr("src",encodeURI(e+cxdCmp.infra.PHOTOS_PATH+d+cxdCmp.config.getConfig("PAGE_EXT")));h.html(v);cxdCmp.searchPanel.onPageAdded(h,a);g(d,e);c&&(h=$("#page_"+d),f.debug("fill page layer "+d+" h: "+h.height()+" w: "+h.width()))}}}function g(a,b){$.ajax({type:"GET",url:encodeURI(b+"/article/webepaper/amap/"+a+".html"),dataType:"html",async:!0,cache:!1,success:function(b){var h=$("#articleLayer_"+a);h.html(b);h.find(".article").html("\x3csvg class\x3d'article-corner x1' version\x3d'1.1' xmlns\x3d'http://www.w3.org/2000/svg' xmlns:xlink\x3d'http://www.w3.org/1999/xlink' x\x3d'0px' y\x3d'0px' width\x3d'6px' height\x3d'6px' viewBox\x3d'0 0 6 6' xml:space\x3d'preserve'\x3e\x3crect width\x3d'0.5' height\x3d'6'/\x3e\x3crect width\x3d'6' height\x3d'0.5'/\x3e\x3c/svg\x3e\x3csvg class\x3d'article-corner x2 flip' version\x3d'1.1' xmlns\x3d'http://www.w3.org/2000/svg' xmlns:xlink\x3d'http://www.w3.org/1999/xlink' x\x3d'0px' y\x3d'0px' width\x3d'6px' height\x3d'6px' viewBox\x3d'0 0 6 6' xml:space\x3d'preserve'\x3e\x3crect width\x3d'0.5' height\x3d'6'/\x3e\x3crect width\x3d'6' height\x3d'0.5'/\x3e\x3c/svg\x3e\x3csvg class\x3d'article-corner x3 rotate270' version\x3d'1.1' xmlns\x3d'http://www.w3.org/2000/svg' xmlns:xlink\x3d'http://www.w3.org/1999/xlink' x\x3d'0px' y\x3d'0px' width\x3d'6px' height\x3d'6px' viewBox\x3d'0 0 6 6' xml:space\x3d'preserve'\x3e\x3crect width\x3d'0.5' height\x3d'6'/\x3e\x3crect width\x3d'6' height\x3d'0.5'/\x3e\x3c/svg\x3e\x3csvg class\x3d'article-corner x4 rotate180' version\x3d'1.1' xmlns\x3d'http://www.w3.org/2000/svg' xmlns:xlink\x3d'http://www.w3.org/1999/xlink' x\x3d'0px' y\x3d'0px' width\x3d'6px' height\x3d'6px' viewBox\x3d'0 0 6 6' xml:space\x3d'preserve'\x3e\x3crect width\x3d'0.5' height\x3d'6'/\x3e\x3crect width\x3d'6' height\x3d'0.5'/\x3e\x3c/svg\x3e");
m()},error:function(b){cxdCmp.toast.checkAndShowOfflineToast(b);t&&f.info("No article map found for page with id "+a+".")}})}function d(a){if(!b){var h=a.attr("data-href");h?(c&&f.debug("Opening URL "+h),window.open(h,"_blank")):(h=a.attr("data-article-id"))?cxdCmp.dialog.showArticle(h,void 0!==a.attr("data-full-size")):(a=a.attr("data-img-file"))&&cxdCmp.dialog.showImage(a)}}function m(){var a=$(".article");H&&a.hammer({}).unbind("tap").bind("tap",function(){d($(this))});var b=0;a.off("mouseenter").on("mouseenter",
function(a){l.turn("disable",!0)});a.off("mouseleave").on("mouseleave",function(a){l.turn("disable",!1)});a.off("mousedown").on("mousedown",function(a){1===a.which&&(b=a.clientX)});a.off("mouseup").on("mouseup",function(a){1===a.which&&10>Math.abs(b-a.clientX)&&d($(this))})}function q(){function a(){c&&f.debug("tap next");r.showNextPage();cxdCmp.toast.onPrevNextButtonUsed();cxdCmp.analytics.trackNextPageBtn()}function b(){c&&f.debug("tap previous");r.showPreviousPage();cxdCmp.toast.onPrevNextButtonUsed();
cxdCmp.analytics.trackPrevPageBtn()}H&&(h.off("touchstart").on("touchstart",function(){h.addClass("active")},{passive:!0}),h.off("touchend").on("touchend",function(){h.removeClass("active");K||a()}));h.off("click").on("click",function(){a()});H&&(x.off("touchstart").on("touchstart",function(){x.addClass("active")},{passive:!0}),x.off("touchend").on("touchend",function(){x.removeClass("active");K||b()}));x.off("click").on("click",function(){b()});if(H){var d=l.hammer({});d.unbind("swipeleft").bind("swipeleft",
function(a){!I.isZoomed()&&$(a.target).is(l)&&(c&&f.debug("swipe next"),r.showNextPage(),cxdCmp.analytics.trackNextPageSwipe())});d.unbind("swiperight").bind("swiperight",function(a){!I.isZoomed()&&$(a.target).is(l)&&(c&&f.debug("swipe previous"),r.showPreviousPage(),cxdCmp.analytics.trackPrevPageSwipe())})}v.on("mouseleave",function(){I.isZoomed()&&v.trigger("mouseup")})}function e(a){var h=cxdCmp.infra.getPages(),d=cxdCmp.infra.getPageSize(),e=d.widthsDiffer,p=d.width;l.turn({gradients:!0,acceleration:!0,
elevation:50,page:a,pages:h.length,when:{turning:function(a,h,c){b=!0;e&&r.isSinglePageMode()&&r.fit(c);I.resetZoom()},turned:function(a,d,e){b=!1;c&&f.debug("Turned to "+h[d].id+" View "+e);y.trigger("pageChange",Math.max(e[0]-1,0));r.updatePrevNextBtns();m();cxdCmp.analytics.isTrackingEnabled()&&cxdCmp.analytics.trackPageView(r.viewToPageLabels(e))},missing:function(a,b){c&&f.debug("Missing Pages "+b);for(var h=0;h<b.length;h++)k(b[h],p)}}})}var f=log4javascript.getLogger("Flipbook"),c=f.isDebugEnabled(),
t=f.isInfoEnabled(),n=f.isErrorEnabled(),r=this,b=!1,a=$("body"),w=$("#maindiv"),l=$("#flipbook"),u=$("#btnMarker"),v=$("#flipbookcontainer"),p=v.parent(),h=$("#btn-next"),x=$("#btn-prev"),A=$("#btnZoom"),z=$("#headerZoomFactor"),C=$("#headerZoomSlider"),B=$("#headerZoomSliderPanel"),G=$("#adFlipbookTop"),E=$("#adFlipbookLeft"),D=$("#adFlipbookRight");$("#articleBoxT");var y=$(document),F=h.outerWidth(!0),H=cxdCmp.layout.hasTouchSupport(),K=cxdCmp.layout.isMobileBrowser(),I=new cxdClasses.Panzoom(v,
p,p,A,z,C,B,!0),L=_.template('\x3cdiv id\x3d"page_\x3c%\x3d id %\x3e" class\x3d"page"\x3e\x3cimg class\x3d"pageLayer imageLayer" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"\x3e\x3cdiv class\x3d"pageLoadingAnimation"\x3e\x3cdiv class\x3d"spinner"\x3e\x3cdiv class\x3d"spinnerItem1"\x3e\x3c/div\x3e\x3cdiv class\x3d"spinnerItem2"\x3e\x3c/div\x3e\x3cdiv class\x3d"spinnerItem3"\x3e\x3c/div\x3e\x3cdiv class\x3d"spinnerItem4"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"articleLayer_\x3c%\x3d id %\x3e" class\x3d"pageLayer articleLayer"\x3e\x3c/div\x3e\x3c/div\x3e');
this.updatePrevNextBtns=function(){var a=l.turn("view"),b=a[a.length-1];x.toggleClass("displaynone",2>a[0]);h.toggleClass("displaynone",!(0<b&&b<cxdCmp.infra.getPages().length))};this.displayModeSingle=function(){"double"===l.turn("display")&&(l.turn("display","single"),a.attr("display","single"),I.resetZoom())};this.displayModeDouble=function(){"single"===l.turn("display")&&(l.turn("display","double"),a.attr("display","double"),I.resetZoom())};this.showArticleMarks=function(){u.attr("on","true");
a.attr("article-marks","true")};this.hideArticleMarks=function(){u.attr("on","false");a.attr("article-marks","false")};this.showPreviousPage=function(){var a=l.turn("disabled");a&&l.turn("disable",!1);c&&f.debug("Previous Page");l.turn("previous");r.updatePrevNextBtns();a&&l.turn("disable",!0)};this.showNextPage=function(){var a=l.turn("disabled");a&&l.turn("disable",!1);c&&f.debug("Next Page");l.turn("next");r.updatePrevNextBtns();a&&l.turn("disable",!0)};this.hideZoomSlider=function(){I.hideZoomSlider()};
this.fit=function(b){var d=cxdCmp.infra.getPages();if(0<d.length){var e=cxdCmp.layout.getOuterHeightIfVisible(G),p=cxdCmp.layout.getUsableHeight()-e,g=cxdCmp.infra.getPageSize(),t=g.ratio;I.resetZoom();I.resetDimensions();var y=cxdCmp.layout.getSidebarWidth(),n=w.outerWidth()-y,u=cxdCmp.layout.getOuterWidthIfVisible(E),k=cxdCmp.layout.getOuterWidthIfVisible(D),u=n-2*F-u-k,k=p,u=u*t;(n=!r.isSinglePageMode())&&(u/=2);k=Math.min(Math.floor(u),p);u=k/t;n?u=2*Math.floor(u):(b||(b=l.turn("view")),(b=d[b[0]-
1])&&(u=u*b.pageWidth/g.width),u=Math.floor(u));n&&1===u%2&&--u;c&&f.debug("flipbook.width:"+u+", flipbook.height: "+k);l.turn("size",u,k);v.css("padding-top",Math.floor((p-k)/2+e));h.css("left",u);w.css("padding-left","portrait"===a.attr("orientation")?0:y)}};this.currentPageIx=function(){var a=l.turn("page")-1;return r.isSinglePageMode()||0!==a%2?a:Math.max(a-1,0)};this.isSinglePageMode=function(){return"single"===l.turn("display")};this.showPageByIx=function(a){if(cxdCmp.infra.getPages()[a]){var b=
l.turn("disabled");b&&l.turn("disable",!1);l.turn("page",parseInt(a,10)+1);r.updatePrevNextBtns();b&&l.turn("disable",!0)}else n&&f.error("PageIx "+a+" invalid.")};this.destroy=function(){var a=l.data("hammer");a&&a.destroy();l.turn("is")&&l.turn("destroy");$(".page").remove();$(".pagelayer").remove();I.destroy()};this.viewToPageLabels=function(a){var b=a;2===a.length&&(0===a[0]?b=[a[1]]:0===a[1]&&(b=[a[0]]));a=[];for(var h=cxdCmp.infra.getPages(),c=0;c<b.length;c++)a.push(h[b[c]-1].label);return a};
this.init=function(a){0<cxdCmp.infra.getPages().length?(e(a),q(),l.turn("disable",cxdCmp.layout.isMobileBrowser()),v.css("cursor","default"),r.fit()):(x.addClass("displaynone"),h.addClass("displaynone"))}}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Styling=function(){function k(){q.off("click");var c=cxdCmp.config.getConfig("LOGO_HREF");if(c){var d=c.toLowerCase();0!==d.indexOf("http://")&&0!==d.indexOf("https://")&&(c="http://"+c);q.on("click",function(){window.open(c,"_blank")});q.toggleClass("clickable",c)}}var g=log4javascript.getLogger("Styling"),d=g.isErrorEnabled(),m=$("head"),q=$("#logo"),e=$(".toolbar"),f="";this.showToolbar=function(){e.removeClass("displaynone")};this.showLogo=function(){q.removeClass("displaynone")};
this.setUp=function(){var c;a:{var d=cxdCmp.config.getConfig("CUSTOM_STYLING_COLOR");if(d){c=d.split(",");var e=c.length;if(3===e){for(var g,b=0;b<e;b++)if(g=+c[b].trim(),isNaN(g)||0>g||256<g){c=null;break a}c=d;break a}}c=null}d=cxdCmp.config.getConfig("CUSTOM_LOGO_FILE");$("#customStylingColorStyle").remove();c?m.append('\x3cstyle id\x3d"customStylingColorStyle" type\x3d"text/css" rel\x3d"stylesheet" onload\x3d"cxdCmp.styling.showToolbar()" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"\x3e'+
f.replace(/\$\{rgb\}/g,c)+"\x3c/style\x3e"):cxdCmp.styling.showToolbar();d?$("#logo img")[0].src=cxdCmp.infra.CUSTOM_PATH+d:cxdCmp.styling.showLogo();$("#customPubStyle").remove();if(d=cxdCmp.config.getConfig("CUSTOM_CSS_FILE"))d=cxdCmp.infra.encodeUrl("lib.custom/"+d),m.append('\x3clink id\x3d"customPubStyle" type\x3d"text/css" rel\x3d"stylesheet" href\x3d"'+d+'" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"/\x3e');k()};(function(){var c=cxdCmp.infra.encodeUrl("src/css/custom-css-template.css");
$.ajax({type:"GET",url:c,dataType:"text",async:!0,cache:!1,success:function(d){f=d;cxdCmp.turnPag.onCustomCssTemplateLoaded()},error:function(){cxdCmp.toast.showLoadingFailedToast();d&&g.error("File "+c+" not found or corrupted.")}})})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Ads=function(){function k(a,b,h){if(a=C[a])return b=r&&b>=a.size[1]&&h>=a.size[0],a.jQ_el.toggleClass("displaynone",!b),b}function g(a,b){var h=C[a];h&&h.jQ_el.toggleClass("displaynone",!r||b<h.size[0])}function d(a,b,h){(a=C[a])&&a.jQ_el.toggleClass("displaynone",!r||b<a.size[0]||.3<h)}function m(){googletag.cmd.push(function(){try{googletag.pubads().refresh(B)}catch(a){t&&e.error(a)}})}function q(){window.googletag=window.googletag||{};googletag.cmd=googletag.cmd||[];googletag.cmd.push(function(){try{var a=
googletag.pubads();a.enableSingleRequest();a.collapseEmptyDivs();googletag.enableServices();var h,d,c;for(c in C)if(C.hasOwnProperty(c)&&"adArticleBoxCenter_"!==c){h=C[c];d=googletag.defineSlot(b+h.code,h.size,c).addService(a);googletag.display(c);var p=d,l=c;switch(l){case "adFlipbookTop":case "adFlipbookLeft":case "adFlipbookRight":B.push(p);break;case "adArticleBoxTop":case "adArticleBoxBottom":G.push(p);break;default:t&&e.error("Unsupported ad slot id detected: "+l)}}cxdCmp.flipbook&&cxdCmp.flipbook.fit()}catch(f){t&&
e.error(f)}});x.append('\x3cscript async\x3d"async" id\x3d"dfpScript" src\x3d"https://www.googletagservices.com/tag/js/gpt.js"\x3e\x3c/script\x3e');c&&e.info("Enabled DFP: network code prefix \x3d "+b)}var e=log4javascript.getLogger("Ads"),f=e.isDebugEnabled(),c=e.isInfoEnabled(),t=e.isErrorEnabled(),n=this,r=!1,b="",a=$("header"),w=$("#adFlipbookTop"),l=$("#adFlipbookLeft"),u=$("#adFlipbookRight"),v=$("#adArticleBoxTop"),p=$("#adArticleBoxBottom"),h=$(window),x=$("head"),A=$("#articleBoxBodyT"),
z=cxdCmp.layout.isMobileBrowser(),C={},B=[],G=[],E=[],D=[];this.fit=function(){if(z){var b=window.innerHeight-a.height()+"px";l.height(b);u.height(b)}var b=cxdCmp.layout.getUsableHeight(),c,e=cxdCmp.layout.getUsableWidth();c=C.adFlipbookLeft;var p=C.adFlipbookRight;c=(e-(c&&c.size[0]||0)-(p&&p.size[0]||0))/3;e=k("adFlipbookLeft",b,c);b=k("adFlipbookRight",b,c);e||b?g("adFlipbookTop",0):g("adFlipbookTop",cxdCmp.layout.getUsableWidth());for(var b=cxdCmp.dialog.getDialogWidth(),e=0,p=["adArticleBoxTop",
"adArticleBoxBottom"],f=0;f<p.length;f++)(c=C[p[f]])&&(e+=c.size[1]);e/=h.height();d("adArticleBoxTop",b,e);d("adArticleBoxBottom",b,e);for(e=0;e<D.length;e++)(c=D[e])&&c.jQ_el.toggleClass("displaynone",!r||b<c.size[0])};this.injectAdsIntoArticleDialog=function(){if(r){var a=C.adArticleBoxCenter_;if(a){var h=a.size;googletag.cmd.push(function(){try{var c=googletag.pubads();c.refresh(G);0<E.length&&(googletag.destroySlots(E),E=[],D=[]);var d=!1;A.find(".adPlaceholder").each(function(p){var l=$(this);
p="adArticleBoxCenter_"+p+ +new Date;l.attr("id",p);f&&e.debug("Injecting new ad for placeholder: Using key "+p);D.push({jQ_el:l,code:a.code,size:h});E.push(googletag.defineSlot(b+a.code,h,p).addService(c));googletag.display(p);d=!0});d&&n.fit()}catch(p){t&&e.error(p)}})}}};this.setUp=function(a){var h,c,d,e,f,g,t,k,x,D,A,z,E,P,Q,R,S,T,U,V,W;for(h in a)if(a.hasOwnProperty(h))switch(c=a[h],h.toUpperCase()){case "DFP_ENABLED":r=c&&"yes"===c.toLowerCase();break;case "DFP_NETWORK_CODE":d=c;break;case "DFP_FLIPBOOK_LEFT_AD_UNIT_CODE":f=
c;break;case "DFP_FLIPBOOK_LEFT_AD_UNIT_WIDTH":t=+(""+c);break;case "DFP_FLIPBOOK_LEFT_AD_UNIT_HEIGHT":D=+(""+c);break;case "DFP_FLIPBOOK_RIGHT_AD_UNIT_CODE":g=c;break;case "DFP_FLIPBOOK_RIGHT_AD_UNIT_WIDTH":k=+(""+c);break;case "DFP_FLIPBOOK_RIGHT_AD_UNIT_HEIGHT":A=+(""+c);break;case "DFP_FLIPBOOK_TOP_AD_UNIT_CODE":e=c;break;case "DFP_FLIPBOOK_TOP_AD_UNIT_WIDTH":x=+(""+c);break;case "DFP_FLIPBOOK_TOP_AD_UNIT_HEIGHT":z=+(""+c);break;case "DFP_ARTICLE_TOP_AD_UNIT_CODE":E=c;break;case "DFP_ARTICLE_TOP_AD_UNIT_WIDTH":P=
+(""+c);break;case "DFP_ARTICLE_TOP_AD_UNIT_HEIGHT":Q=+(""+c);break;case "DFP_ARTICLE_BOTTOM_AD_UNIT_CODE":R=c;break;case "DFP_ARTICLE_BOTTOM_AD_UNIT_WIDTH":S=+(""+c);break;case "DFP_ARTICLE_BOTTOM_AD_UNIT_HEIGHT":T=+(""+c);break;case "DFP_ARTICLE_CENTER_AD_UNIT_CODE":U=c;break;case "DFP_ARTICLE_CENTER_AD_UNIT_WIDTH":V=+(""+c);break;case "DFP_ARTICLE_CENTER_AD_UNIT_HEIGHT":W=+(""+c)}if(r=r&&d)if(0===$("#dfpScript").length){if(C={},B=[],G=[],b="/"+d+"/",a=!1,!f||isNaN(t)||isNaN(t)||(C.adFlipbookLeft=
{jQ_el:l,code:f,size:[t,D]},a=!0),!g||isNaN(k)||isNaN(A)||(C.adFlipbookRight={jQ_el:u,code:g,size:[k,A]},a=!0),!e||isNaN(x)||isNaN(z)||(C.adFlipbookTop={jQ_el:w,code:e,size:[x,z]},a=!0,w.css("height",z),n.fit()),!E||isNaN(P)||isNaN(Q)||(C.adArticleBoxTop={jQ_el:v,code:E,size:[P,Q]},a=!0),!R||isNaN(S)||isNaN(T)||(C.adArticleBoxBottom={jQ_el:p,code:R,size:[S,T]},a=!0),!U||isNaN(V)||isNaN(W)||(C.adArticleBoxCenter_={jQ_el:null,code:U,size:[V,W]},a=!0),a){q();return}}else m();n.fit()}}})();
cxdClasses=cxdClasses||{};
(function(){cxdClasses.AnalyticsHelper=function(){function k(c){var d=$("#googleAnalyticsScript");f?0===d.length&&(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create",c,"auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),q.append('\x3cscript async id\x3d"googleAnalyticsScript" src\x3d"https://www.google-analytics.com/analytics.js"\x3e\x3c/script\x3e'),m&&g.info("Enabled Google Analytics: gaTrackingId\x3d"+c)):d.remove()}var g=log4javascript.getLogger("AnalyticsHelper"),
d=g.isDebugEnabled(),m=g.isInfoEnabled(),q=$("head"),e=!1,f=!1;this.isTrackingEnabled=function(){return e||f};this.trackPublicationSelect=function(c){d&&g.debug("trackPublicationSelect "+c);e&&_paq.push(["trackEvent","ePaperUI",c,"Publiktionsauswahl"]);f&&ga("send","event","Interaction","Select publication",c,1)};this.trackPrevPageBtn=function(){d&&g.debug("trackPrevPageBtn");e&&_paq.push(["trackEvent","ePaperUI","Button","PrevPage"]);f&&ga("send","event","Interaction","PrevPage","Button",1)};this.trackNextPageBtn=
function(){d&&g.debug("trackNextPageBtn");e&&_paq.push(["trackEvent","ePaperUI","Button","NextPage"]);f&&ga("send","event","Interaction","NextPage","Button",1)};this.trackPrevPageKey=function(){d&&g.debug("trackPrevPageKey");e&&_paq.push(["trackEvent","ePaperUI","Key","PrevPage"]);f&&ga("send","event","Interaction","PrevPage","Key",1)};this.trackNextPageKey=function(){d&&g.debug("trackNextPageKey");e&&_paq.push(["trackEvent","ePaperUI","Key","NextPage"]);f&&ga("send","event","Interaction","NextPage",
"Key",1)};this.trackPrevPageSwipe=function(){d&&g.debug("trackPrevPageSwipe");e&&_paq.push(["trackEvent","ePaperUI","Swipe","PrevPage"]);f&&ga("send","event","Interaction","PrevPage","Swipe",1)};this.trackNextPageSwipe=function(){d&&g.debug("trackNextPageSwipe");e&&_paq.push(["trackEvent","ePaperUI","Swipe","NextPage"]);f&&ga("send","event","Interaction","NextPage","Swipe",1)};this.trackPageThumbClick=function(c){this.isTrackingEnabled()&&(c=cxdCmp.infra.getCurrentPubTitle()+" / "+c,d&&g.debug("trackPageThumbClick "+
c),e&&_paq.push(["trackEvent","ePaperUI",c,"PageThumb"]),f&&ga("send","event","Interaction","PageThumb",c,1))};this.trackSectionExpandBtnClick=function(c){if(this.isTrackingEnabled()){var k=cxdCmp.infra.getCurrentPubTitle(),n=k+" / "+c;d&&g.debug("trackSectionExpandBtnClick "+n);e&&_paq.push(["trackEvent","ePaperUI",n,"SectionExpandBtn"]);f&&ga("send","event","Interaction","SectionExpandBtn",k+": "+c,1)}};this.trackSectionCollapseBtnClick=function(c){if(this.isTrackingEnabled()){var k=cxdCmp.infra.getCurrentPubTitle(),
n=k+" / "+c;d&&g.debug("trackSectionCollapseBtnClick "+n);e&&_paq.push(["trackEvent","ePaperUI",n,"SectionCollapseBtn"]);f&&ga("send","event","Interaction","SectionCollapseBtn",k+": "+c,1)}};this.trackPageView=function(c){if(this.isTrackingEnabled())for(var k=cxdCmp.infra.getCurrentPubTitle(),n,m,b=0;b<c.length;b++)m=c[b],n=k+" / Seite "+m,d&&g.debug("trackPageView "+n),e&&(_paq.push(["setDocumentTitle",n]),_paq.push(["trackPageView"])),f&&ga("send","event","Navigation",k,m,1)};this.trackArticleView=
function(c){if(this.isTrackingEnabled()){var k=cxdCmp.infra.getCurrentPubTitle(),n=k+" / Artikel "+c;d&&g.debug("trackArticleView "+n);e&&(_paq.push(["setDocumentTitle",n]),_paq.push(["trackPageView"]));f&&ga("send","event","ArticleView",k,c,1)}};this.trackThumbsBtnOn=function(){d&&g.debug("trackThumbsBtnOn");e&&_paq.push(["trackEvent","ePaperUI","On","ThumbsBtn"]);f&&ga("send","event","Interaction","ThumbsBtn","On",1)};this.trackThumbsBtnOff=function(){d&&g.debug("trackThumbsBtnOff");e&&_paq.push(["trackEvent",
"ePaperUI","Off","ThumbsBtn"]);f&&ga("send","event","Interaction","ThumbsBtn","Off",1)};this.trackPrintSaveBtn=function(){d&&g.debug("trackPrintSaveBtn");e&&_paq.push(["trackEvent","ePaperUI","Click","PrintSaveBtn"]);f&&ga("send","event","Interaction","PrintSaveBtn","DialogOpened",1)};this.trackAboutBtn=function(){d&&g.debug("trackAboutBtn");e&&_paq.push(["trackEvent","ePaperUI","Click","AboutBtn"]);f&&ga("send","event","Interaction","AboutBtn","DialogOpened",1)};this.trackSearchBtnOn=function(){d&&
g.debug("trackSearchBtnOn");e&&_paq.push(["trackEvent","ePaperUI","On","SearchBtn"]);f&&ga("send","event","Interaction","SearchBtn","On",1)};this.trackSearchBtnOff=function(){d&&g.debug("trackSearchBtnOff");e&&_paq.push(["trackEvent","ePaperUI","Off","SearchBtn"]);f&&ga("send","event","Interaction","SearchBtn","Off",1)};this.trackArticleMarksBtnOn=function(){d&&g.debug("trackArticleMarksBtnOn");e&&_paq.push(["trackEvent","ePaperUI","On","ArticleMarksBtn"]);f&&ga("send","event","Interaction","ArticleMarksBtn",
"On",1)};this.trackArticleMarksBtnOff=function(){d&&g.debug("trackArticleMarksBtnOff");e&&_paq.push(["trackEvent","ePaperUI","Off","ArticleMarksBtn"]);f&&ga("send","event","Interaction","ArticleMarksBtn","Off",1)};this.trackPrintSavePage=function(c){this.isTrackingEnabled()&&(c=cxdCmp.infra.getCurrentPubTitle()+" / Seite "+c,d&&g.debug("trackPrintSavePage "+c),e&&_paq.push(["trackEvent","ePaperUI",c,"PrintSavePage"]),f&&ga("send","event","Interaction","PrintSavePageBtn",c,1))};this.trackSearchTerm=
function(c,k){if(this.isTrackingEnabled()){var n=cxdCmp.infra.getCurrentPubTitle()+" / "+c+" ("+k+")";d&&g.debug("trackSearchTerm "+n);e&&_paq.push(["trackEvent","ePaperUI",n,"SearchTerm"]);f&&ga("send","event","Interaction","SearchTerm",n,1)}};this.setUp=function(c){var d,n,r,b,a;for(d in c)if(c.hasOwnProperty(d))switch(n=c[d],d.toUpperCase()){case "PIWIK_ENABLED":e=n&&"yes"===n.toLowerCase();break;case "PIWIK_URL":r=n;break;case "PIWIK_SITE_ID":b=n;break;case "GA_ENABLED":f=n&&"yes"===n.toLowerCase();
break;case "GA_TRACKING_ID":a=n}e=e&&r&&b;c=r;d=$("#piwikScript");e?0===d.length&&(window._paq=window._paq||[],_paq.push(["enableLinkTracking"]),_paq.push(["setTrackerUrl",c+"piwik.php"]),_paq.push(["setSiteId",b]),q.append('\x3cscript type\x3d"text/javascript" async defer id\x3d"piwikScript" src\x3d"'+c+'piwik.js"\x3e\x3c/script\x3e'),m&&g.info("Enabled piwik: piwikUrl\x3d"+c+", piwikSiteId\x3d"+b)):d.remove();f=f&&a;k(a)}}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Config=function(){function k(b){g(t,!0);r=n.PAGETHUMB_EXT;null!==b&&(g(b,!1),cxdCmp.analytics.setUp(n),cxdCmp.ads.setUp(n))}function g(b,a){var d,f;for(d in b)if(b.hasOwnProperty(d))switch(f=d.toUpperCase(),f){case "PAGETHUMB_EXT":case "PAGE_EXT":case "HIDE_THUMBSPANEL":case "HIDE_PAGETHUMBS_INITIALLY":case "SHOW_PUBLICATIONS_INITIALLY":case "SOCIAL_SHARING_ENABLED":case "USE_PUBLICATION_FILTER":case "PIWIK_ENABLED":case "PIWIK_SITE_ID":case "PIWIK_URL":case "GA_ENABLED":case "GA_TRACKING_ID":case "DFP_ENABLED":case "CUSTOM_STYLING_COLOR":case "CUSTOM_LOGO_FILE":case "CUSTOM_CSS_FILE":case "LOGO_HREF":case "APPLICATION_TITLE":n[f]=
b[d];break;case "DATAPATH":case "MULTI_TENANT_MODE":case "SERVER_MODE":case "LOGGED_IN":case "CSRF_PARAMETER":case "CSRF_TOKEN":case "USERNAME":case "DFP_NETWORK_CODE":case "DFP_FLIPBOOK_LEFT_AD_UNIT_CODE":case "DFP_FLIPBOOK_LEFT_AD_UNIT_WIDTH":case "DFP_FLIPBOOK_LEFT_AD_UNIT_HEIGHT":case "DFP_FLIPBOOK_RIGHT_AD_UNIT_CODE":case "DFP_FLIPBOOK_RIGHT_AD_UNIT_WIDTH":case "DFP_FLIPBOOK_RIGHT_AD_UNIT_HEIGHT":case "DFP_FLIPBOOK_TOP_AD_UNIT_CODE":case "DFP_FLIPBOOK_TOP_AD_UNIT_WIDTH":case "DFP_FLIPBOOK_TOP_AD_UNIT_HEIGHT":case "DFP_ARTICLE_TOP_AD_UNIT_CODE":case "DFP_ARTICLE_TOP_AD_UNIT_WIDTH":case "DFP_ARTICLE_TOP_AD_UNIT_HEIGHT":case "DFP_ARTICLE_BOTTOM_AD_UNIT_CODE":case "DFP_ARTICLE_BOTTOM_AD_UNIT_WIDTH":case "DFP_ARTICLE_BOTTOM_AD_UNIT_HEIGHT":case "DFP_ARTICLE_CENTER_AD_UNIT_CODE":case "DFP_ARTICLE_CENTER_AD_UNIT_WIDTH":case "DFP_ARTICLE_CENTER_AD_UNIT_HEIGHT":a&&
(n[f]=b[d]);break;default:c&&e.info('Unsupported setting "'+d+'" disregarded.')}}function d(b){$.ajax({type:"GET",url:cxdCmp.infra.encodeUrl(cxdCmp.infra.CUSTOM_PATH+"config.json"),dataType:"json",async:!0,cache:!1,success:function(a){t=a;f&&e.debug("Loaded config.json: "+a);k(b)},error:function(){c&&e.info('File "'+cxdCmp.infra.CUSTOM_PATH+'"config.json" not found.');t={}},complete:function(){cxdCmp.turnPag.onConfigLoaded()}})}function m(b){var a=location.search.indexOf("?");if(-1<a)for(var a=location.search.substr(a+
1).split("\x26"),c=b.toLowerCase(),d=0;d<a.length;d++)if(b=a[d].split("\x3d"),c===b[0].toLowerCase())return decodeURIComponent(b[1]);return null}var q={DATAPATH:"data/",HIDE_PAGETHUMBS_INITIALLY:"no",HIDE_THUMBSPANEL:"no",SHOW_PUBLICATIONS_INITIALLY:"no",SOCIAL_SHARING_ENABLED:"no",MULTI_TENANT_MODE:"no",PAGE_EXT:".jpeg",PAGETHUMB_EXT:".jpeg",SERVER_MODE:"no",LOGGED_IN:"no",CSRF_PARAMETER:"",CSRF_TOKEN:"",USERNAME:"",APPLICATION_TITLE:"",PIWIK_ENABLED:"no",PIWIK_SITE_ID:"",PIWIK_URL:"",GA_ENABLED:"no",
GA_TRACKING_ID:"",DFP_ENABLED:"no",CUSTOM_STYLING_COLOR:"",CUSTOM_LOGO_FILE:"",CUSTOM_CSS_FILE:"",LOGO_HREF:"",DFP_NETWORK_CODE:"",DFP_SLOT_FLIPBOOK_LEFT_INVENTORY_CODE:"",DFP_SLOT_FLIPBOOK_LEFT_WIDTH:"",DFP_SLOT_FLIPBOOK_LEFT_HEIGHT:"",DFP_SLOT_FLIPBOOK_RIGHT_INVENTORY_CODE:"",DFP_SLOT_FLIPBOOK_RIGHT_WIDTH:"",DFP_SLOT_FLIPBOOK_RIGHT_HEIGHT:"",DFP_SLOT_FLIPBOOK_TOP_INVENTORY_CODE:"",DFP_SLOT_FLIPBOOK_TOP_WIDTH:"",DFP_SLOT_FLIPBOOK_TOP_HEIGHT:"",DFP_ARTICLE_TOP_AD_UNIT_CODE:"",DFP_ARTICLE_TOP_AD_UNIT_WIDTH:"",
DFP_ARTICLE_TOP_AD_UNIT_HEIGHT:"",DFP_ARTICLE_BOTTOM_AD_UNIT_CODE:"",DFP_ARTICLE_BOTTOM_AD_UNIT_WIDTH:"",DFP_ARTICLE_BOTTOM_AD_UNIT_HEIGHT:"",DFP_ARTICLE_CENTER_AD_UNIT_CODE:"",DFP_ARTICLE_CENTER_AD_UNIT_WIDTH:"",DFP_ARTICLE_CENTER_AD_UNIT_HEIGHT:""},e=log4javascript.getLogger("Config"),f=e.isDebugEnabled(),c=e.isInfoEnabled(),t=null,n=null,r=null;this.applyOptions=function(b){n={};g(q,!0);t?k(b):d(b)};this.getPublicationId=function(){return m("pub")};this.getPage=function(){return m("page")};this.getArticleId=
function(){return m("article")};this.getImageFilename=function(){return m("image")};this.getUrlFilterParams=function(){var b=location.search.indexOf("?");if(-1<b){for(var b=location.search.substr(b+1).split("\x26"),a,c=[],d=0;d<b.length;d++)switch(a=b[d],a.split("\x3d")[0].toLowerCase()){case "product":case "pubyear":case "edition":case "variant":case "searchterm":c.push(a)}return c.join("\x26")}return null};this.getFullSize=function(){return m("fullSize")};this.getConfig=function(b){return n[b]};
this.getBooleanConfig=function(b){return(b=n[b])&&"yes"===b.toLowerCase()};this.getConfigJsonPageThumbExt=function(){return r};this.applyOptions(null)}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Controller=function(){function k(a){var b=y.turn("view"),h=Math.max(b[0],1),h=cxdCmp.infra.getPages()[h-1].label;D.is(":focus")||D.is(":active")?a&&"pageChange"===a.type||D.val(h):D.val(cxdCmp.flipbook.viewToPageLabels(b).join("/"))}function g(){var a="";D.off("focusout blur").on("focusout blur",k);D.off("focus").on("focus",function(b){k(b);a=D[0].value});D.off("click tap").on("click tap",function(){this.select()});D.off("input").on("input",function(b){b=D[0];var h=b.value;
if(h){var c=cxdCmp.infra.getPageIxByPageLabel(h);if(void 0!==c)cxdCmp.flipbook.showPageByIx(c),a=h;else{a:{for(var c=cxdCmp.infra.getAllPageLabels(),d=0;d<c.length;d++)if(c[d].startsWith(h)){c=!0;break a}c=!1}c?a=h:b.value=a}}});D.off("keydown").on("keydown",function(a){13===a.keyCode&&D.blur()})}function d(){if(cxdCmp.config.getBooleanConfig("SERVER_MODE")&&cxdCmp.config.getBooleanConfig("LOGGED_IN")){var a=cxdCmp.config.getConfig("CSRF_PARAMETER"),b=cxdCmp.config.getConfig("CSRF_TOKEN");if(a&&b){H.removeClass("displaynone");
var c=cxdCmp.config.getConfig("USERNAME");c&&h.attr("title",cxdCmp.i18n.i18n("server.logout",[c]));h.off("click").on("click",function(){var h={};h[a]=b;$.ajax({type:"POST",url:cxdCmp.infra.encodeUrl("logout"),data:h,async:!0,cache:!1,success:function(){window.open("login","_self")},error:function(a){f&&q.info("Unable to logout.");cxdCmp.toast.checkAndShowOfflineToast(a)}})})}}}var m=this,q=log4javascript.getLogger("Controller"),e=q.isDebugEnabled(),f=q.isErrorEnabled(),c=$(window),t=$(document),n=
$("body"),r=$("#about"),b=$("#canvas"),a=$("#credits");$("#maindiv");var w=$("#btnZoom"),l=$("#btnAbout"),u=$("#btnMarker"),v=$("#btnThumbsPanel"),p=$("#btnSearchPanel"),h=$("#btnLogout"),x=$("#printSavePanel"),A=$("#btn_mainmenu"),z=$("#btnPublicationsPanel"),C=$("#publicationsPanel"),B=$("#linkCredits"),G=$("#searchpanel"),E=$("#btnPrintSave"),D=$("#pagejumper"),y=$("#flipbook"),F=$("#headerZoomSliderPanel");$("#flipbookcontainer");var H=$(".logoutFeature"),K=$('input[type\x3d"text"]'),I=$("button.page-action");
$("header button");var L=$(".navbar-collapse"),J=$(".modal-dialog");this.fitAll=function(a){e&&q.debug("fitAll");c.innerWidth()-Math.min(G.innerWidth(),300)<c.innerHeight()?(cxdCmp.flipbook&&cxdCmp.flipbook.displayModeSingle(),J.addClass("portrait"),n.attr("orientation","portrait")):(cxdCmp.flipbook&&cxdCmp.flipbook.displayModeDouble(),J.addClass("landscape"),n.attr("orientation","landscape"));cxdCmp.publicationsPanel&&cxdCmp.publicationsPanel.fit();cxdCmp.pageGallery&&cxdCmp.pageGallery.refresh();
cxdCmp.ads&&cxdCmp.ads.fit();cxdCmp.flipbook&&cxdCmp.flipbook.fit();cxdCmp.thumbsPanel&&cxdCmp.thumbsPanel.fit(a);cxdCmp.searchPanel&&cxdCmp.searchPanel.fit(a)};this.destroy=function(){var a=b.data("hammer");a&&a.destroy()};(function(){function h(){m.fitAll(!1);k();cxdCmp.flipbook.updatePrevNextBtns();e&&"landscape"===n.attr("orientation")&&window.scrollTo(0,1)}g();d();t.off("pageChange",void 0,k).on("pageChange",void 0,k);I.off("pointerdown MSPointerDown").on("pointerdown MSPointerDown",function(a){a.preventDefault()});
l.off("click").on("click",function(){r.modal({});cxdCmp.analytics.trackAboutBtn()});cxdCmp.layout.hasTouchSupport()&&b.hammer({}).unbind("tap swipe").bind("tap swipe",function(a){D.blur();a.preventDefault()});b.off("click").on("click",function(){D.blur()});B.off("click").on("click",function(){a.modal({})});E.off("click").on("click",function(){cxdCmp.printSavePanel.populate();x.modal({});cxdCmp.analytics.trackPrintSaveBtn()});v.off("click").on("click",function(){"false"===v.attr("on")?(cxdCmp.thumbsPanel.show(),
cxdCmp.publicationsPanel.hide(),cxdCmp.searchPanel.hide(),cxdCmp.controller.fitAll(!0),cxdCmp.analytics.trackThumbsBtnOn()):(cxdCmp.thumbsPanel.hide(),cxdCmp.controller.fitAll(!1),cxdCmp.analytics.trackThumbsBtnOff())});p.off("click").on("click",function(){"false"===p.attr("on")?(cxdCmp.searchPanel.show(),cxdCmp.thumbsPanel.hide(),cxdCmp.publicationsPanel.hide(),cxdCmp.controller.fitAll(!0),cxdCmp.analytics.trackSearchBtnOn()):(cxdCmp.searchPanel.hide(),cxdCmp.controller.fitAll(!1),cxdCmp.analytics.trackSearchBtnOff())});
u.off("click").on("click",function(){"false"===u.attr("on")?(u.attr("on","true"),cxdCmp.flipbook.showArticleMarks(),cxdCmp.analytics.trackArticleMarksBtnOn()):(u.attr("on","false"),cxdCmp.flipbook.hideArticleMarks(),cxdCmp.analytics.trackArticleMarksBtnOff())});w.off("click").on("click",function(a){"false"===w.attr("on")?(cxdCmp.flipbook.showZoomSlider(),cxdCmp.toast.onZoomButtonUsed()):cxdCmp.flipbook.hideZoomSlider();return!1});F.off("click mouseover mousemove").on("click mouseover mousemove",function(a){a.stopImmediatePropagation()});
L.off("hide.bs.collapse").on("hide.bs.collapse",function(){cxdCmp.flipbook.hideZoomSlider()});z.off("click").on("click",function(){"false"===z.attr("on")?(cxdCmp.publicationsPanel.show(),cxdCmp.searchPanel.hide(),cxdCmp.thumbsPanel.hide()):cxdCmp.publicationsPanel.hide();cxdCmp.controller.fitAll(!1)});C.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(a){this.scrollLeft-=60*Math.max(-1,Math.min(1,a.originalEvent.wheelDelta||-a.originalEvent.deltaY||-a.originalEvent.detail));
a.preventDefault()});$("nav").find("li").off("click").on("click",function(){$(".navbar-collapse.in").collapse("hide")});A.off("click").on("click",function(a){$(".navbar-collapse").collapse("toggle");A.blur();a.preventDefault();a.stopPropagation()});var e=cxdCmp.layout.isMobileBrowser(),f,q=e?500:100;c.off("resize").on("resize",function(){clearTimeout(f);f=setTimeout(h,q)});c.off("keydown").on("keydown",function(a){if(0<cxdCmp.infra.getPages().length){var b=37===a.keyCode;a=39===a.keyCode;!b&&!a||
K.is(":focus")||n.hasClass("modal-open")||(b?(cxdCmp.flipbook.showPreviousPage(),cxdCmp.toast.onPrevNextKeyboardUsed(),cxdCmp.analytics.trackPrevPageKey()):(cxdCmp.flipbook.showNextPage(),cxdCmp.toast.onPrevNextKeyboardUsed(),cxdCmp.analytics.trackNextPageKey()))}})})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.DataProvider=function(){function k(d,f,c,g,k,m){f=f.id;for(var b,a,w,l=0;l<d.length;l++)c=d[l],b=c.width||c.pagewidth||m,a=c.height||c.pageheight||k,w=w||a,g.push({id:encodeURI(c.id),label:c.label,sectionId:f,pageWidth:w/a*b,pageHeight:a,ratio:a/b})}function g(e,f,c,g,n,m,b,a,w,l){$.ajax({type:"GET",url:cxdCmp.infra.encodeUrl(e),dataType:"json",async:!0,cache:!1,success:function(d){var e=[f],p=[];k(d.pages,f,e,p,m,b);if(d=d.subsections)for(var h,x=f.id,q=0;q<d.length;q++)h=
d[q],h.parentSectionId=x,f.subSectionIds.push(h.id),e.push(h),k(h.pages,h,e,p,m,b);d=n.results;d[c]={sections:e,pages:p};if(++n.numProcessed===g){e=[];p=[];h=0;for(var z,C,q=0;q<g;q++){z=d[q].sections;for(x=0;x<z.length;x++)e.push(z[x]);z=d[q].pages;for(x=0;x<z.length;x++)C=z[x],C.ix=h,C.label=C.label||""+(h+1),h++,p.push(C)}cxdCmp.infra.setupPublicationData(e,p,m,b);cxdCmp.turnPag.onSectionsLoaded(a,w,l)}},error:function(a){cxdCmp.toast.showLoadingFailedToast(a);q&&d.error("File "+e+" not found or corrupted.")}})}
var d=log4javascript.getLogger("Cxd_DataProvider"),m=d.isInfoEnabled(),q=d.isErrorEnabled();this.processManifest=function(e,f,c){$.ajax({type:"GET",url:cxdCmp.infra.encodeUrl(cxdCmp.config.getConfig("DATAPATH")+e+"/manifest.json"),dataType:"json",async:!0,cache:!1,success:function(k){cxdCmp.config.applyOptions(k);var n=k.pageheight,q=k.pagewidth,b=k.sections,a=cxdCmp.config.getConfig("DATAPATH"),w=a+e+"/";m&&d.info(b.length+" sections loaded from manifest.json");var l,u,v;k={results:[],numProcessed:0};
for(var p=[],h=0;h<b.length;h++)if(u=b[h],m&&d.info("Processing section "+u.name),l={id:encodeURI(u.id),name:u.name,subSectionIds:[],parentSectionId:null},v=u.files)for(u=0;u<v.length;u++)p.push({file:a+v[u],section:l});else p.push({file:w+decodeURI(u.id)+"/epaper.json",section:l});a=p.length;for(h=0;h<a;h++)b=p[h],g(b.file,b.section,h,a,k,n,q,e,f,c);cxdCmp.loadingMask.manifestLoaded()},error:function(c){cxdCmp.toast.showLoadingFailedToast(c);q&&d.error('File "manifest.json" not found or corrupt.')}})};
(function(){var e=cxdCmp.infra.encodeUrl(cxdCmp.config.getConfig("DATAPATH")+"publications.json");if(cxdCmp.config.getBooleanConfig("SERVER_MODE")){var f=cxdCmp.config.getUrlFilterParams();f&&(e+="?"+f)}$.ajax({type:"GET",url:e,dataType:"json",async:!0,cache:!1,success:function(c){var d=[];if(c=c.publications){for(var e,f=0;f<c.length;f++)e=c[f],d.push({id:""+e.id,title:e.title,pageOne:e.pageone,tenantId:e.tenantId,pageThumbExt:e.pagethumb_extension?e.pagethumb_extension:".jpeg",product:e.product,
edition:e.edition,pubDate:""+e.pubDate});cxdCmp.infra.setupPublications(d)}else cxdCmp.infra.setupPublications([]);cxdCmp.turnPag.onPublicationsLoaded()},error:function(c){cxdCmp.toast.showLoadingFailedToast(c);q&&d.error('File "publications.json" not found or corrupt.')}})})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Dialog=function(){function k(a){var c=cxdCmp.config.getConfig("DATAPATH")+cxdCmp.infra.getCurrentPubId()+"/article/webepaper/html/"+a+".html",c=cxdCmp.infra.encodeUrl(c);e&&q.debug("load article "+a+" article path\x3d"+c);$.ajax({type:"GET",url:c,dataType:"html",async:!0,cache:!1,success:function(c){b.html(c);cxdCmp.ads.injectAdsIntoArticleDialog();cxdCmp.analytics.trackArticleView(a)},error:function(a){cxdCmp.toast.checkAndShowOfflineToast(a);f&&q.error('File "'+c+" not found.");
n.html("")}})}function g(a){cxdCmp.config.getBooleanConfig("SOCIAL_SHARING_ENABLED")?n.jsSocials({url:a,showCount:!1,showLabel:!1,shares:m}):n.html("")}function d(){null!==p&&(p.hideZoomSlider(),p.destroy(),p=null)}var m=["facebook","twitter","googleplus"],q=log4javascript.getLogger("Dialog"),e=q.isDebugEnabled(),f=q.isErrorEnabled(),c=$("head"),t=$("#articleBoxT"),n=$("#articleBoxSocials"),r=$("#articleBoxDialog"),b=$("#articleBoxBodyT"),a=$("#btnArticleBoxZoom"),w=$("#articleBoxZoomFactor"),l=$("#articleBoxZoomSlider"),
u=$("#articleBoxZoomSliderPanel"),v=_.template('\x3cdiv class\x3d"imageDetail panzoom"\x3e\x3cdiv class\x3d"imageDetailContent" style\x3d"background-image: url(\x3c%\x3d url %\x3e);"\x3e\x3c/div\x3e\x3c/div\x3e'),p=null;this.showArticle=function(h,c){e&&q.debug("Opening article "+h);r.toggleClass("fullSize",c);b.html("");var f=window.location.href.split("?")[0]+"?pub\x3d"+cxdCmp.infra.getCurrentPubId()+"\x26article\x3d"+h;r.hasClass("fullSize")&&(f+="\x26fullSize\x3dtrue");e&&q.debug("Generated sharing url for article "+
h+": "+f);g(f);k(h);a.addClass("displaynone");d();t.modal({})};this.showImage=function(c){e&&q.debug("Opening image "+c);r.addClass("fullSize");b.html("");var f=window.location.href.split("?")[0]+"?pub\x3d"+cxdCmp.infra.getCurrentPubId()+"\x26image\x3d"+c;e&&q.debug("Generated sharing url for image "+c+": "+f);g(f);b.append(v({url:cxdCmp.config.getConfig("DATAPATH")+cxdCmp.infra.getCurrentPubId()+"/webepaper/photos/"+c}));d();c=$(".imageDetail.panzoom");p=new cxdClasses.Panzoom(c,b,c,a,w,l,u,!1);
a.removeClass("displaynone");t.modal({})};this.getDialogWidth=function(){var a=r.css("margin-left");return"auto"===a?-2+r.innerWidth():-2+t.width()-2*parseInt(a,10)};this.init=function(a){cxdCmp.config.getBooleanConfig("SOCIAL_SHARING_ENABLED")&&0===$("#jsSocials").length&&(c.append('\x3cscript id\x3d"jsSocials" type\x3d"text/javascript" src\x3d"src/js/vendor/jssocials/jssocials.min.js" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"\x3e\x3c/script\x3e'),c.append('\x3clink type\x3d"text/css" rel\x3d"stylesheet" href\x3d"src/js/vendor/jssocials/jssocials.css" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"/\x3e'),
c.append('\x3clink type\x3d"text/css" rel\x3d"stylesheet" href\x3d"src/js/vendor/jssocials/jssocials-theme-flat.css" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"/\x3e'),c.append('\x3clink type\x3d"text/css" rel\x3d"stylesheet" href\x3d"src/js/vendor/font-awesome/css/font-awesome.min.css" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"/\x3e'));a&&(a=cxdCmp.config.getArticleId(),null!==a?this.showArticle(a,"true"===cxdCmp.config.getFullSize()):(a=cxdCmp.config.getImageFilename())&&this.showImage(a))};
(function(){t.off("shown.bs.modal").on("shown.bs.modal",function(a){b.scrollTop(0);n.focus()})})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.I18n=function(){function k(){function b(a){a=a.substring(2,a.length-1);return t.i18n(a)}$(".i18n").each(function(){_.each(this.attributes,function(a){a.value=a.value.replace(/\$\{.*?\}/g,b)});/^\$\{.*?\}$/.test(this.innerHTML)&&(this.innerHTML=b(this.innerHTML))})}function g(){switch(n){case "de":return"Resources_de.properties";default:return"Resources_en.properties"}}function d(b){switch(b.toLowerCase()){case "\\u00df":return"\u00df";case "\\u00f6":return"\u00f6";case "\\u00e4":return"\u00e4";
case "\\u00fc":return"\u00fc";case "\\u00c4":return"\u00c4";case "\\u00dc":return"\u00dc";case "\\u00d6":return"\u00d6";default:return c&&f.error('No UTF-8 character defined for unicode character "'+b+'"'),b}}function m(b,a){var c,e,f,g;g=void 0===a?[]:a;for(var p=b.split("\n"),h=0;h<p.length;h++)c=p[h],e=c.indexOf("\x3d"),-1<e&&(f=c.substring(0,e),c=c.substring(e+1).trim(),-1===g.indexOf(f)&&(r[f]=c.replace(/\\u00../g,d)))}function q(){var b=cxdCmp.infra.encodeUrl(cxdCmp.infra.CUSTOM_PATH+g());$.ajax({type:"GET",
url:b,dataType:"text",async:!0,cache:!1,success:function(a){m(a,e)},error:function(){c&&f.info("File "+b+" not found or corrupted.")},complete:function(a,b){k();cxdCmp.turnPag.onI18nLoaded()}})}var e=["info.credits.copyright.years","info.credits.copyright.company"],f=log4javascript.getLogger("I18n"),c=f.isErrorEnabled(),t=this,n=function(){var b=navigator.languages;b||(b=[navigator.language||navigator.userLanguage]);if(b)for(var a,c=0;c<b.length;c++){a=b[c].toUpperCase();if(0===a.indexOf("DE"))return"de";
if(0===a.indexOf("EN"))break}return"en"}(),r={};this.i18n=function(b,a){var d=r[b];if(!d)return c&&f.error("No value associated with i18n-key "+b),b;if(a)for(var e=0;e<a.length;e++)d=d.replace("{"+e+"}",a[e]);return d};this.toLocalizedNumberString=function(b){switch(n){case "de":return b.toLocaleString("de-DE");default:return b.toLocaleString("en-US")}};this.toLocalizedZoomFactor=function(b){b=""+b;-1===b.indexOf(".")&&(b+=".0");switch(n){case "de":return b.replace(".",",");default:return b}};this.toLocalizedDateString=
function(b){if(b&&8===b.length){var a=b.substring(0,4),c=b.substring(4,6);b=b.substring(6);switch(n){case "de":return b+"."+c+"."+a;default:return b+"/"+c+"/"+a}}return b};(function(){var b=cxdCmp.infra.encodeUrl("src/i18n/"+g());$.ajax({type:"GET",url:b,dataType:"text",async:!0,cache:!1,success:function(a){m(a);q()},error:function(){cxdCmp.toast.showLoadingFailedToast();c&&f.error("File "+b+" not found or corrupted.")}})})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Layout=function(){$(window);var k=$("body"),g=$("html"),d=$("header");$("head");$("#t");var m=$("#maindiv"),q=$("#thumbspanel"),e=$("#searchpanel"),f=$("#publicationsPanel"),c=$("#publicationFilterPanel"),t=$("#sidebarBtnsRightSeperator"),n=parseInt(f.css("borderTopWidth"),10),r="ontouchstart"in document.documentElement,b=r&&null!==navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|android|iemobile|blackberry|bada)/);this.hasTouchSupport=function(){return r};this.isMobileBrowser=
function(){return b};this.getUsableHeight=function(){return window.innerHeight-d.height()-n};this.getUsableWidth=function(){return m.outerWidth()-this.getSidebarWidth()};this.getSidebarWidth=function(){return q.width()+e.width()+c.width()};this.getOuterWidthIfVisible=function(a){return"none"===a.css("display")?0:a.outerWidth(!0)};this.getOuterHeightIfVisible=function(a){return"none"===a.css("display")?0:a.outerHeight(!0)};this.activateSidebarFeature=function(a,b){a.toggleClass("displaynone",!b);t.toggleClass("displaynone",
e.hasClass("displaynone")&&q.hasClass("displaynone"))};(function(){r?g.addClass("touch"):g.addClass("no-touch");b&&g.addClass("mobile");var a,c=!1;g.on("touchstart",function(){clearTimeout(a);c=!0;g.removeClass("no-touch").addClass("touch");a=setTimeout(function(){c=!1},500)});g.on("mouseover",function(){c||(c=!1,g.removeClass("touch").addClass("no-touch"))});b&&"landscape"===k.attr("orientation")&&window.scrollTo(0,1)})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.LoadingMask=function(){var k=log4javascript.getLogger("LoadingMask"),g=k.isDebugEnabled();k.isInfoEnabled();$("body");var d=$("#loadingMask"),m=$("#loadingProgress");this.show=function(){d.hasClass("displaynone")&&(m.val(0),d.removeClass("displaynone"))};this.hide=function(){d.addClass("displaynone")};this.logConfigLoaded=function(){m.val(1);g&&k.debug("log config loaded.")};this.i18nLoaded=function(){m.val(3);g&&k.debug("i18n loaded.")};this.customCssTemplateLoaded=function(){m.val(4);
g&&k.debug("style template loaded.")};this.configLoaded=function(){m.val(5);g&&k.debug("config loaded.")};this.publicationsLoaded=function(){m.val(6);g&&k.debug("publications loaded.")};this.manifestLoaded=function(){m.val(8);g&&k.debug("manifest loaded.")};this.sectionsLoaded=function(){m.val(9);g&&k.debug("sections loaded.")}}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Logging=function(){function k(d){if(d=d.configs)for(var f,c,g=0;g<d.length;g++)f=d[g],f.logger&&f.level&&(c=log4javascript.getLogger(f.logger),f=log4javascript.Level[f.level],c&&f&&c.setLevel(f))}var g={configs:[{logger:"Controller",level:"OFF"},{logger:"PageGallery",level:"OFF"},{logger:"AnalyticsHelper",level:"OFF"},{logger:"Cxd_DataProvider",level:"OFF"},{logger:"ThumbsPanel",level:"OFF"},{logger:"TurnPag",level:"OFF"},{logger:"SearchPanel",level:"OFF"},{logger:"PublicationsPanel",
level:"OFF"},{logger:"PublicationFilterPanel",level:"OFF"},{logger:"PublicationPanelProxy",level:"OFF"},{logger:"PrintSavePanel",level:"OFF"},{logger:"Dialog",level:"OFF"},{logger:"Flipbook",level:"OFF"},{logger:"Config",level:"OFF"},{logger:"I18n",level:"OFF"},{logger:"Marjorie",level:"OFF"},{logger:"LoadingMask",level:"OFF"},{logger:"Logging",level:"OFF"},{logger:"Ads",level:"OFF"},{logger:"Toast",level:"OFF"},{logger:"Styling",level:"OFF"}]},d=log4javascript.getLogger("Logging"),m=d.isInfoEnabled(),
q=d.isErrorEnabled();(function(){var e=log4javascript.getRootLogger(),f=new log4javascript.BrowserConsoleAppender;f.setLayout(new log4javascript.PatternLayout("%p %c: %m"));log4javascript.setShowStackTraces(!0);e.setLevel(log4javascript.Level.INFO);e.removeAllAppenders();k(g);e.addAppender(f);$.ajax({type:"GET",url:cxdCmp.infra.encodeUrl("lib.custom/logconfig.json"),dataType:"json",async:!0,cache:!1,success:function(c){k(c)},error:function(){m&&d.info("No custom logconfig.json found - using default log setup")},
complete:function(){cxdCmp.turnPag.onLoggingLoaded()}})})();(function(){window.onerror=function(e,f,c,g,k){q&&(e="Uncaught error: "+e+"\nurl: "+f+"\nline #: "+c+"\ncolumn #:"+g,k&&k instanceof Error&&(e+="\n"+k.stack),d.error(e));return!0}})()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Marjorie=function(){function k(){if(cxdCmp.config.getBooleanConfig("MULTI_TENANT_MODE")){if(f){var a=f.tenantId;if(null===a||void 0===a)return[f];for(var b=[],c,d=0;d<q.length;d++)c=q[d],c.tenantId===a&&b.push(c);return b}return[]}return q}function g(){e=k();w=[];for(var a,b,c,d,f=0;f<e.length;f++)d=e[f],a=d.product,b=d.edition,c=d.pubDate,a&&b&&c&&w.push({pubId:d.id,product:a,edition:b,pubDate:c,pubDateI18n:cxdCmp.i18n.toLocalizedDateString(c)})}this.CUSTOM_PATH="lib.custom/";
this.PHOTOS_PATH="/webepaper/photos/";this.THUMBS_PATH=this.PHOTOS_PATH+"thumbs/";var d=log4javascript.getLogger("Marjorie"),m=d.isDebugEnabled(),q=[],e=[],f=null,c={},t=[],n=[],r=[],b={},a={},w=[],l={};this.setupPublications=function(a){q=a;l={};for(var b,c=0;c<a.length;c++)b=a[c],l[b.id]=b.title;g()};this.getTenantPublications=function(){return e};this.setCurrentPubId=function(a){for(var b,c=0;c<q.length;c++)if(b=q[c],b.id===a){f=b;break}g()};this.getCurrentPubId=function(){return f?f.id:null};
this.getCurrentPubTitle=function(){return f?f.title:null};this.getFirstPubId=function(){return 0<q.length?q[0].id:null};this.pubIdExists=function(a){for(var b=0;b<q.length;b++)if(q[b].id===a)return!0;return!1};this.setupPublicationData=function(e,f){n=e;t=f;r=[];b={};for(var g,h=0;h<t.length;h++)g=t[h].label,r.push(g),void 0===b[g]&&(b[g]=h);a={};for(h=0;h<n.length;h++)g=n[h],a[g.id]=g;var k=0,h=0;g=!1;if(0<f.length)for(var k=f[0],h=k.pageHeight,k=k.pageWidth,l,q=1;q<f.length;q++)l=f[q].pageWidth,
l!==k&&(g=!0),k=Math.max(l,k);c={height:h,width:k,ratio:h/k,widthsDiffer:g};m&&d.debug("Setup page ratio: "+c.ratio)};this.encodeUrl=function(a){return encodeURI(a)};this.getSections=function(){return n};this.getPages=function(){return t};this.getPageSize=function(){return c};this.sectionById=function(b){return a[b]};this.getPageIxByPageLabel=function(a){return b[a]};this.getAllPageLabels=function(){return r};this.getPublicationInfosByFilter=function(a,b){for(var c=[],d,e=0;e<w.length;e++)d=w[e],
a&&a!==d.product||b&&b!==d.edition||c.push(d);return c};this.getPublicationInfo=function(a){for(var b,c=0;c<w.length;c++)if(b=w[c],b.pubId===a)return b;return null};this.getPublicationIdByInfo=function(a,b,c){for(var d,e=0;e<w.length;e++)if(d=w[e],d.product===a&&d.edition===b&&d.pubDate===c)return d.pubId;return null};this.getPubIdWithLatestPubDate=function(){for(var a,b,c=null,d=null,e=0;e<w.length;e++)if(a=w[e],b=a.pubDate,null===d||b>c)c=b,d=a.pubId;return d};this.getPublicationTitleById=function(a){return l[a]}}})();
cxdClasses=cxdClasses||{};
(function(){cxdClasses.PageGallery=function(){function k(b,a){m&&d.debug("pageChange detected");$(".pageno").removeClass("current");$(".pageno[data-pageix\x3d"+a+"]").addClass("current")}function g(){if(0===f.children().length){for(var b,a=0,g="rightPg",l=cxdCmp.infra.getPages(),m=$(window).width(),q=Math.round(m/l.length),m=m-100,p,h,x,A=cxdCmp.infra.getCurrentPubId();a<l.length;)b=l[a],h=cxdCmp.config.getConfig("DATAPATH")+A+cxdCmp.infra.THUMBS_PATH+b.id+cxdCmp.config.getConfig("PAGETHUMB_EXT"),x=
Math.min(q*a,m),cxdCmp.flipbook.isSinglePageMode()||0===a||a===l.length-1?(b=c({rl:g,pgIx:a,pgTitle:b.label,left:x,width:q}),$(b).appendTo("#pagegallery"),b=t({rl:g,pgIx:a,left:x,imgUrl:cxdCmp.infra.encodeUrl(h)}),$(b).appendTo("#pagegallery"),a++):(p=l[a+1],b=n({rl:g,pgIx:a,pgTitle:b.label+"/"+p.label,left:x,width:q}),$(b).appendTo("#pagegallery"),p=cxdCmp.config.getConfig("DATAPATH")+A+cxdCmp.infra.THUMBS_PATH+p.id+cxdCmp.config.getConfig("PAGETHUMB_EXT"),b=r({rl:g,pgIx:a,left:x,imgUrl1:h,imgUrl2:p}),
$(b).appendTo("#pagegallery"),a+=2),g="rightPg"===g?"leftPg":"rightPg";a=$(".pageno");a.mouseover(function(){var a=$(this);a.attr("visible","true");a="tooltip-"+a.attr("data-pageIx");$(".pgtooltip[id\x3d"+a+"]").attr("visible","true")});a.mouseout(function(){var a=$(this);a.attr("visible","false");a="tooltip-"+a.attr("data-pageIx");$(".pgtooltip[id\x3d"+a+"]").attr("visible","false")});a.click(function(){cxdCmp.flipbook.showPageByIx($(this).attr("data-pageIx"))});f.off("mousewheel").on("mousewheel",
function(a,b){var c=cxdCmp.flipbook.currentPageIx()+b;if(0>c)c=0;else{var e=cxdCmp.infra.allPages();e.length<c&&(c=e.length-1)}cxdCmp.flipbook.showPageByIx(c);d.isDebugEnabled()&&d.debug("Wheelto: "+cxdCmp.flipbook.currentPageIx());$(".pgtooltip").attr("visible","false");c=$(".pageno");c.addClass("wheely");c.removeClass("current pageno");$(".wheely").attr("visible","false");c=$(".wheely[data-pageIx\x3d"+cxdCmp.flipbook.currentPageIx()+"]");$(c).attr("visible","true");return!1});f.off("mouseleave").on("mouseleave",
function(){var a=$(".wheely");a.addClass("pageno");a.removeClass("wheely");$(".pageno[data-pageIx\x3d"+cxdCmp.flipbook.currentPageIx()+"]").addClass("current");return!1});e.on("pageChange",void 0,k)}}var d=log4javascript.getLogger("PageGallery"),m=d.isDebugEnabled(),q=this,e=$(document),f=$("#pagegallery"),c=_.template('\x3cdiv id\x3d"page\x3c%\x3d pgIx %\x3e" class\x3d"pageno \x3c%\x3d rl %\x3e" data-pageIx\x3d"\x3c%\x3d pgIx %\x3e"style\x3d"left: \x3c%\x3d left %\x3epx; width: \x3c%\x3d width %\x3epx;"\x3e\x3clabel \x3e\x3c%\x3d pgTitle %\x3e\x3c/label\x3e \x3c/div\x3e'),
t=_.template('\x3cdiv class\x3d"pgtooltip \x3c%\x3d rl %\x3e" data-pageIx\x3d"\x3c%\x3d pgIx %\x3e" visible\x3d"false" style\x3d"left: \x3c%\x3d left %\x3epx;" id\x3d"tooltip-\x3c%\x3d pgIx %\x3e"\x3e\x3cimg class\x3d"galleryImage" src\x3d"\x3c%\x3d imgUrl %\x3e"/\x3e\x3c/div\x3e'),n=_.template('\x3cdiv id\x3d"page\x3c%\x3d pgIx %\x3e" class\x3d"pageno \x3c%\x3d rl %\x3e" data-pageIx\x3d"\x3c%\x3d pgIx %\x3e"style\x3d"left: \x3c%\x3d left %\x3epx; width: \x3c%\x3d width %\x3epx;"\x3e\x3clabel \x3e\x3c%\x3d pgTitle %\x3e\x3c/label\x3e \x3c/div\x3e'),
r=_.template('\x3cdiv class\x3d"pgtooltip \x3c%\x3d rl %\x3e" data-pageIx\x3d"\x3c%\x3d pgIx %\x3e" visible\x3d"false" style\x3d"left: \x3c%\x3d left %\x3epx;" id\x3d"tooltip-\x3c%\x3d pgIx %\x3e"\x3e\x3cimg class\x3d"galleryImage" src\x3d"\x3c%\x3d imgUrl1 %\x3e"/\x3e\x3cimg class\x3d"galleryImage" src\x3d"\x3c%\x3d imgUrl2 %\x3e"/\x3e\x3c/div\x3e');this.destroy=function(){$(".pageno").off("mouseover mouseout click mousewheel");e.off("pageChange",void 0,k);f.html("")};this.refresh=function(){q.destroy();
g()};g()}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.Panzoom=function(k,g,d,m,q,e,f,c){var t=log4javascript.getLogger("Panzoom"),n=t.isDebugEnabled(),r=cxdCmp.layout.hasTouchSupport(),b=this,a=!1;this.isZoomed=function(){return a};this.resetZoom=function(){e.val(1);e.trigger("change")};this.resetDimensions=function(){k.panzoom("resetDimensions")};this.destroy=function(){k.panzoom("destroy");g.removeAttr("style");var a=d.data("hammer");a&&a.destroy()};this.showZoomSlider=function(){m.attr("on","true");f.removeClass("displaynone")};
this.hideZoomSlider=function(){m.attr("on","false");f.addClass("displaynone")};(function(){k.panzoom({startTransform:"scale(1.0)",increment:.2,minScale:1,contain:"invert",panOnlyWhenZoomed:!0});g.off("mousewheel").on("mousewheel",function(a,b){var d=0>b,e={increment:.2,animate:!1};a?(e.focal=a,n&&t.debug("Zoom: "+a.deltaFactor+" "+a.offsetX+" "+a.offsetY+" "+a.screenX)):n&&t.debug("zoom without event");k.panzoom("zoom",d,e);if(c)cxdCmp.toast.onZoomMouswheelUsed()});if(r){var w=!1;d.hammer({}).unbind("tap").bind("tap",
function(c){a&&(w?(w=!1,c.preventDefault(),b.resetZoom()):(w=!0,setTimeout(function(){w=!1},300)))})}d.off("dblclick").on("dblclick",function(a){a.preventDefault();b.resetZoom()});k.off("panzoomzoom").on("panzoomzoom",function(b,c,d){a=1!==d;e.val(d);e.trigger("change")});k.off("mousedown").on("mousedown",function(){k.css("cursor","move")});k.off("mouseup").on("mouseup",function(){k.css("cursor","default")});e.off("input change").on("input change",function(){var b=+e.val();q.html(cxdCmp.i18n.toLocalizedZoomFactor(b));
k.panzoom("zoom",b,{silent:!0});(a=1!==b)||k.css("transform","translate3d(0,0,0)")});f.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(a){g.trigger(a,Math.max(-1,Math.min(1,a.originalEvent.wheelDelta||-a.originalEvent.deltaY||-a.originalEvent.detail)))});m.off("click").on("click",function(a){if("false"===m.attr("on")){if(b.showZoomSlider(),c)cxdCmp.toast.onZoomButtonUsed()}else b.hideZoomSlider();return!1});b.hideZoomSlider();b.resetZoom()})()}})();
cxdClasses=cxdClasses||{};
(function(){cxdClasses.PrintSavePanel=function(){function k(a,c,h,f,g,k){var p=cxdCmp.infra.getPages()[a];c.html(G({pageurl:d(p)}));e(k,g);f.html(b+" "+p.label);c.find("img").on("click",function(){m(k,p.label)});h.removeClass("displaynone")}function g(a){h.html(G({pageurl:d(cxdCmp.infra.getPages()[0])}));z.html(q(a));h.find("img").off("click").on("click",function(){m("/webepaper/pdf/full/full.pdf","full publication")});w.removeClass("displaynone")}function d(a){a=cxdCmp.config.getConfig("DATAPATH")+cxdCmp.infra.getCurrentPubId()+
cxdCmp.infra.THUMBS_PATH+a.id+cxdCmp.config.getConfig("PAGETHUMB_EXT");return cxdCmp.infra.encodeUrl(a)}function m(a,b){var c=cxdCmp.config.getConfig("DATAPATH")+cxdCmp.infra.getCurrentPubId()+a;window.open(cxdCmp.infra.encodeUrl(c));cxdCmp.analytics.trackPrintSavePage(b)}function q(a){return null===a?"? MB":cxdCmp.i18n.toLocalizedNumberString(Math.max(Math.round(10*a/1024/1024)/10,.1))+" MB"}function e(a,b){b.html(q(null));var c=cxdCmp.config.getConfig("DATAPATH")+cxdCmp.infra.getCurrentPubId()+
a;$.ajax({type:"HEAD",url:cxdCmp.infra.encodeUrl(c),async:!0,cache:!1,success:function(a,c,d){a=d.getResponseHeader("Content-Length");b.html(q(a))},error:function(b){r&&t.error("File "+a+" not found.")}})}function f(b){E=!1;var c=cxdCmp.infra.getPages();0<c.length&&(b=cxdCmp.config.getConfig("DATAPATH")+b+"/webepaper/pdf/"+c[0].id+".pdf",$.ajax({type:"HEAD",url:cxdCmp.infra.encodeUrl(b),async:!0,cache:!1,success:function(){E=!0;a.removeClass("displaynone")},error:function(a){n&&t.info("No PDF found for the first publication page.")}}))}
function c(b){w.addClass("displaynone");b=cxdCmp.config.getConfig("DATAPATH")+b+"/webepaper/pdf/full/full.pdf";$.ajax({type:"HEAD",url:cxdCmp.infra.encodeUrl(b),async:!0,cache:!1,success:function(b,c,d){b=d.getResponseHeader("Content-Length");g(b);a.removeClass("displaynone")},error:function(a){n&&t.info("No publication PDF found.")}})}var t=log4javascript.getLogger("PrintSavePanel"),n=t.isInfoEnabled(),r=t.isErrorEnabled(),b=cxdCmp.i18n.i18n("label.page"),a=$(".printSaveFeature"),w=$("#fullPageThumb"),
l=$("#leftPageThumb"),u=$("#rightPageThumb"),v=$("#leftPageThumb \x3e div \x3e .pageThumbTitle"),p=$("#rightPageThumb \x3e div \x3e .pageThumbTitle"),h=$("#fullPageThumb \x3e div \x3e .thumbContainer"),x=$("#leftPageThumb \x3e div \x3e .thumbContainer"),A=$("#rightPageThumb \x3e div \x3e .thumbContainer"),z=$("#fullPageThumb .dlSize"),C=$("#leftPageThumb .dlSize"),B=$("#rightPageThumb .dlSize"),G=_.template('\x3cimg class\x3d"thumbImage2 activatable" src\x3d"\x3c%\x3dpageurl%\x3e" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"/\x3e'),
E=!1;this.reinitialize=function(b){a.addClass("displaynone");f(b);c(b)};this.populate=function(){if(E){var a=cxdCmp.flipbook.currentPageIx(),b=cxdCmp.infra.getPages(),c="/webepaper/pdf/"+b[a].id+".pdf";k(a,x,l,v,C,c);0===a||cxdCmp.flipbook.isSinglePageMode()||a===b.length-1?u.addClass("displaynone"):(c="/webepaper/pdf/"+b[a+1].id+".pdf",k(a+1,A,u,p,B,c))}};a.addClass("displaynone")}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.PublicationFilterPanel=function(){function k(a,b){for(var c={},d={},e,f=cxdCmp.infra.getPublicationInfosByFilter(a,b),g=0;g<f.length;g++)e=f[g],c[e.edition]="",d[e.pubDate]="";d=Object.keys(d).sort().reverse();e=Object.keys(c).sort();c=[];for(g=0;g<e.length;g++)b=e[g],c.push({value:b,display:b});e=[];for(var k,g=0;g<d.length;g++)f=d[g],k=u[f],k||(k=cxdCmp.i18n.toLocalizedDateString(f),u[f]=k),e.push({value:f,display:k});return{editions:c,pubDates:e}}function g(a,b,c){a.html("");
a.append('\x3coption hidden disabled selected value\x3d"" class\x3d"promptOption displaynone"\x3e'+l+"\x3c/option\x3e");for(var d,e,f=0;f<b.length;f++)d=b[f],e=d.value,a.append('\x3coption value\x3d"'+e+'"'+(e===c?" selected":"")+"\x3e"+d.display+"\x3c/option\x3e")}function d(){var c=r.val(),d=b.val();c&&d&&(c=k(c,d).pubDates,0<c.length&&a.val(c[0].value))}function m(c,d){var e=r.val(),f=k(e,null);g(b,f.editions,c);e=k(e,c);g(a,e.pubDates,d)}var q=this,e=log4javascript.getLogger("PublicationFilterPanel"),
f=e.isDebugEnabled(),c=e.isErrorEnabled(),t=$("body"),n=$("#btnPublicationsPanel"),r=$("#pubFilterProduct"),b=$("#pubFilterEdition"),a=$("#pubFilterPubDate"),w=$(".pubFilterPanelFeature"),l=cxdCmp.i18n.i18n("pubFilter.select.prompt"),u={};this.show=function(){n.attr("on","true");t.attr("pubFilter-visible","true")};this.hide=function(){n.attr("on","false");t.attr("pubFilter-visible","false")};this.destroy=function(){w.addClass("displaynone");r.html("");b.html("");a.html("")};this.init=function(a){var b=
cxdCmp.infra.getPublicationInfo(a);if(b){a=b.product;var c=b.edition,b=b.pubDate;if(a&&c&&b){for(var d={},e=cxdCmp.infra.getPublicationInfosByFilter(null,null),f=0;f<e.length;f++)d[e[f].product]="";for(var d=Object.keys(d).sort(),e=[],k,f=0;f<d.length;f++)k=d[f],e.push({value:k,display:k});g(r,e,a);m(c,b)}}};(function(){function l(){var d=r.val(),h=b.val(),g=a.val();if(d&&h&&g){var k=cxdCmp.infra.getPublicationIdByInfo(d,h,g);null!==k?(f&&e.debug("Opening publication with id "+k),q.hide(),cxdCmp.turnPag.load(k,
!1)):c&&e.error('No publication with product "'+d+'", edition "'+h+'", pubDate "'+g+'" existing.')}}r.off("change").on("change",function(){m(b.val(),a.val());d();l()});b.off("change").on("change",function(){var c=k(r.val(),b.val());g(a,c.pubDates,a.val());d();l()});a.off("change").on("change",function(){l()})})();w.removeClass("displaynone")}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.PublicationPanelProxy=function(){var k=log4javascript.getLogger("PublicationPanelProxy"),g=k.isDebugEnabled(),d;this.show=function(){d.show()};this.hide=function(){d.hide()};this.fit=function(){d.fit&&d.fit()};this.init=function(m,q){cxdCmp.config.getBooleanConfig("USE_PUBLICATION_FILTER")?d instanceof cxdClasses.PublicationFilterPanel||(d&&(d.hide(),d.destroy()),d=new cxdClasses.PublicationFilterPanel,g&&k.debug("PublicationFilterPanel loaded.")):d instanceof cxdClasses.PublicationSelectionPanel||
(d&&(d.hide(),d.destroy()),d=new cxdClasses.PublicationSelectionPanel,g&&k.debug("PublicationSelectionPanel loaded."));d.init(m);cxdCmp.config.getBooleanConfig("SHOW_PUBLICATIONS_INITIALLY")&&this.show()}}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.PublicationSelectionPanel=function(){function k(){e.html("");for(var a=cxdCmp.infra.getTenantPublications(),c=cxdCmp.config.getConfig("DATAPATH"),f,k,n=0;n<a.length;n++)f=a[n],k=c+f.id+cxdCmp.infra.THUMBS_PATH+f.pageOne+f.pageThumbExt,e.append(b({title:f.title,publication:f.id,ePageUrl:cxdCmp.infra.encodeUrl(k)}));$(".pubThumbImage").off("click").on("click",function(a){var b=$(this);r&&b.removeClass("active");b=b.attr("data-pubid");m&&d.debug('Select publication "'+b+'"');g.hide();
cxdCmp.turnPag.load(b,!1);cxdCmp.analytics.trackPublicationSelect(cxdCmp.infra.getCurrentPubTitle());a.stopPropagation();return!1})}var g=this,d=log4javascript.getLogger("PublicationsPanel"),m=d.isDebugEnabled(),q=$("body"),e=$("#pubContainer"),f=$("#publicationsPanel"),c=$("#btnPublicationsPanel"),t=$(".pubSelectionPanelFeature"),n=$("#flipbookcontainer"),r=cxdCmp.layout.hasTouchSupport(),b=_.template('\x3cdiv class\x3d"pubThumbele"\x3e\x3clabel class\x3d"pubThumbTitle"\x3e\x3c%\x3dtitle %\x3e\x3c/label\x3e\x3cimg class\x3d"pubThumbImage activatable" data-pubid\x3d"\x3c%\x3dpublication %\x3e" data-pubtitle\x3d"\x3c%\x3dtitle %\x3e" src\x3d"\x3c%\x3dePageUrl %\x3e" title\x3d"\x3c%\x3dtitle %\x3e" onerror\x3d"cxdCmp.toast.checkAndShowOfflineToast()"/\x3e\x3c/div\x3e');
this.show=function(){c.attr("on","true");q.attr("publications-visible","true")};this.hide=function(){c.attr("on","false");q.attr("publications-visible","false")};this.toggle=function(){"true"===q.attr("publications-visible")?this.hide():this.show()};this.destroy=function(){t.addClass("displaynone");e.html("");n.off("click");f.off("click");var a=n.data("hammer");a&&a.destroy()};this.init=function(a){k();a=$('.pubThumbImage[data-pubid\x3d"'+a+'"]');a=$(a);$(".pubThumbImage").removeClass("currentPublication");
$(".pubThumbTitle").removeClass("currentPublication");a.addClass("currentPublication");a.siblings().addClass("currentPublication")};(function(){r&&n.hammer({}).unbind("tap").bind("tap",function(a){g.hide();a.preventDefault()});n.off("click").on("click",function(a){g.hide();a.preventDefault()});f.off("click").on("click",function(a){g.toggle();return!1})})();t.removeClass("displaynone")}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.SearchCommon=function(){this.searchResultTemplate=_.template('\x3cdiv pubId\x3d"\x3c%\x3d pubId %\x3e" \x3c% if (pageNoLeft !\x3d\x3d null) { %\x3epageNoLeft\x3d"\x3c%\x3d pageNoLeft %\x3e" pageLabelLeft\x3d"\x3c%\x3d pageLabelLeft %\x3e"\x3c% } %\x3e \x3c% if (pageNoRight !\x3d\x3d null) { %\x3e pageNoRight\x3d"\x3c%\x3d pageNoRight %\x3e" pageLabelRight\x3d"\x3c%\x3d pageLabelRight %\x3e"\x3c% } %\x3e class\x3d"searchResultServer"\x3e\x3cdiv class\x3d"resultPageThumbContainer activatable easing \x3c%\x3d imgContainerClass %\x3e"\x3e\x3c% if (pageNoLeft !\x3d\x3d null) { %\x3e\x3cimg src\x3d"\x3c%\x3d imgSrcLeft %\x3e" style\x3d"\x3c%\x3d imgStyleLeft %\x3e"/\x3e\x3cspan class\x3d"pageLabel left easing"\x3e\x3c%\x3d pageLabelLeft %\x3e\x3c/span\x3e\x3c% } %\x3e\x3c% if (pageNoRight !\x3d\x3d null) { %\x3e\x3cimg src\x3d"\x3c%\x3d imgSrcRight %\x3e" style\x3d"\x3c%\x3d imgStyleRight %\x3e"/\x3e\x3cspan class\x3d"pageLabel right easing"\x3e\x3c%\x3d pageLabelRight %\x3e\x3c/span\x3e\x3c% } %\x3e\x3c/div\x3e\x3cdiv class\x3d"resultInfo"\x3e\x3c% for (var i \x3d 0; i \x3c 2; i++) { %\x3e\x3cdiv class\x3d"matchingText"\x3e\x3c%\x3d matches[i] %\x3e\x3c/div\x3e\x3c% } %\x3e\x3c% if (matches.length \x3e 2) { %\x3e\x3cdiv class\x3d"moreResultsContainer displaynone"\x3e\x3c% for (var i \x3d 2; i \x3c matches.length; i++) { %\x3e\x3cdiv class\x3d"matchingText"\x3e\x3c%\x3d matches[i] %\x3e\x3c/div\x3e\x3c% } %\x3e\x3cspan class\x3d"lessResultsBtn" title\x3d"'+cxdCmp.i18n.i18n("search.server.lessResults.title")+
'"\x3e'+cxdCmp.i18n.i18n("search.server.lessResults")+'\x3c/span\x3e\x3c/div\x3e\x3cspan class\x3d"moreResultsBtn" title\x3d"'+cxdCmp.i18n.i18n("search.server.additionalResults.title")+'"\x3e\x3c%\x3d moreResultsBtnLabel %\x3e\x3c/span\x3e\x3c% } %\x3e\x3c/div\x3e');this.getWordsAfter=function(k,g,d,m){for(var q=0,e=g+d,f=e;f<k.length&&!(" "===k.charAt(f)&&(q++,q>m));f++)e=f;return k.substring(g+d,e)+(f<k.length?"...":"")};this.getWordsBefore=function(k,g,d){for(var m=0,q=0,e=g;-1<e&&!(" "===k.charAt(e)&&
(m++,m>d));e--)q=e;k=k.substring(q,g);return(0<e?"...":"")+k};this.getIndicesOf=function(k,g){for(var d=0,m=[],q=k.length;-1<(d=g.indexOf(k,d));)m.push(d),d+=q;return m}}})();cxdClasses=cxdClasses||{};
(function(){cxdClasses.SearchPanel=function(){function k(a,b){if("true"===l.attr("search-visible")){$(".currentPage").removeClass("currentPage");var c='.searchResult[pageNo\x3d"'+(a+1)+'"]';0<a&&"landscape"===l.attr("orientation")&&(c+=', .searchResult[pageNo\x3d"'+(a+2)+'"]');c=$(c).addClass("currentPage");if(b&&0!==c.length){var d=c.height()*c.length;B.scrollTop(c[0].offsetTop-(cxdCmp.layout.getUsableHeight()-d)/2)}}}function g(a,b){k(b,!0)}function d(){h[0].value="";h.trigger("change");B.html("");
e(!1,0)}function m(a){var d=cxdCmp.config.getConfig("DATAPATH")+a+"/webepaper/content/content.xml";$.ajax({type:"GET",url:cxdCmp.infra.encodeUrl(d),dataType:"xml",async:!0,cache:!1,success:function(a){c=[];var b,d,e;a=$(a);a.find("extractcontent \x3e documents \x3e document \x3e pages \x3e page").each(function(){b=$(this);(d=b.text().trim())&&0<d.length&&c.push({type:"pageContent",pageNo:parseInt(b.attr("id"),10)+1,text:d,lowerCaseText:d.toLowerCase()})});a.find("extractcontent \x3e documents \x3e document \x3e articles \x3e article").each(function(){e=
$(this);(d=e.text().trim())&&0<d.length&&c.push({type:"articleContent",pageNo:parseInt(e.attr("pageNo"),10),articleId:e.attr("id"),title:e.attr("title"),lowerCaseText:d.toLowerCase()})});0<c.length?cxdCmp.layout.activateSidebarFeature(p,!0):cxdCmp.layout.activateSidebarFeature(p,!1)},error:function(a){cxdCmp.toast.checkAndShowOfflineToast(a);b&&n.info("File "+d+" not found or corrupted.");c=[]}})}function q(){B.find(".searchResultPage").on("click",function(){var a=$(this).attr("pageNo");r&&n.debug("Showing page No "+
a+" from search result list.");"portrait"===l.attr("orientation")&&(t.hide(),cxdCmp.controller.fitAll(!1));cxdCmp.flipbook.showPageByIx(a-1)});B.find(".searchResultArticle").on("click",function(){var a=$(this).attr("articleId");r&&n.debug("Showing article id "+a+" from search result list.");cxdCmp.dialog.showArticle(a,!1)})}function e(a,b,c){a?(A.addClass("displaynone"),z.addClass("displaynone"),x.removeClass("displaynone"),u.attr("disabled","disabled")):(u.removeAttr("disabled"),3<=b?(1===c?A.html(cxdCmp.i18n.i18n("search.label.numResults.plural",
["\x3cb\x3e1\x3c/b\x3e"])):A.html(cxdCmp.i18n.i18n("search.label.numResults.plural",["\x3cb\x3e"+c+"\x3c/b\x3e"])),b=0<c,A.attr("hasResults",b),A.removeClass("displaynone"),z.addClass("displaynone"),x.addClass("displaynone"),b&&cxdCmp.layout.hasTouchSupport()?h.blur():h.focus()):(A.addClass("displaynone"),z.removeClass("displaynone"),x.addClass("displaynone")));t.searchInProgress=a}function f(){B.html("");var b=h[0].value;r&&n.debug('searching for "'+b+'" ...');var d=0,f=b.length;if(b&&3<=f){e(!0);
for(var g,l,m,p,t,u=b.toLowerCase(),w=cxdCmp.infra.getPages(),v,x=0;x<c.length;x++)if(l=c[x],g=l.text,m=l.pageNo,p=w[m-1])switch(l.type){case "pageContent":l=cxdCmp.searchCommon.getIndicesOf(u,l.lowerCaseText);d+=l.length;for(v=0;v<l.length;v++)t=l[v],B.append(G({pageNo:m,pageLabel:p.label,textBefore:cxdCmp.searchCommon.getWordsBefore(g,t,3),match:g.substring(t,t+f),textAfter:cxdCmp.searchCommon.getWordsAfter(g,t,f,3)}));break;case "articleContent":-1<l.lowerCaseText.indexOf(u)&&(B.append(E({pageNo:m,
pageLabel:p.label,title:l.title,articleId:l.articleId})),d++);break;default:a&&n.error('Unsupported content element type "'+l.type+'" detected.')}k(cxdCmp.flipbook.currentPageIx(),!0)}r&&n.debug("search returned "+d+" results.");q();e(!1,f,d);cxdCmp.analytics.trackSearchTerm(b,d)}var c=[];this.searchInProgress=!1;var t=this,n=log4javascript.getLogger("SearchPanel"),r=n.isDebugEnabled(),b=n.isInfoEnabled(),a=n.isErrorEnabled(),w=$(document),l=$("body"),u=$("#searchBtn"),v=$("#btnSearchPanel"),p=$(".searchFeature"),
h=$("#searchInput"),x=$("#searchInProgress"),A=$("#srLabel"),z=$("#searchTooShortLabel"),C=$("#btnClearSearchInput"),B=$("#searchResults"),G=_.template('\x3cdiv pageNo\x3d"\x3c%\x3d pageNo %\x3e" class\x3d"searchResult searchResultPage easing activatable"\x3e\x3cdiv class\x3d"matchingText"\x3e\x3c%\x3d textBefore %\x3e\x3cmark\x3e\x3c%\x3d match %\x3e\x3c/mark\x3e\x3c%\x3d textAfter %\x3e\x3c/div\x3e\x3cdiv class\x3d"resultPageNo"\x3e'+cxdCmp.i18n.i18n("label.page")+" \x3c%\x3d pageLabel %\x3e\x3c/div\x3e\x3c/div\x3e"),
E=_.template('\x3cdiv articleId\x3d"\x3c%\x3d articleId %\x3e" pageNo\x3d"\x3c%\x3d pageNo %\x3e" class\x3d"searchResult searchResultArticle easing activatable"\x3e\x3cdiv class\x3d"articleTitle"\x3e\x3c%\x3d title %\x3e\x3c/div\x3e\x3cdiv class\x3d"resultPageNo"\x3e'+cxdCmp.i18n.i18n("label.page")+" \x3c%\x3d pageLabel %\x3e\x3c/div\x3e\x3c/div\x3e");this.show=function(){l.attr("search-visible","true");v.attr("on","true");h.focus()};this.hide=function(){l.attr("search-visible","false");v.attr("on",
"false");h.blur()};this.destroy=function(){h.off("keydown");u.off("click");B.find(".searchResultPage").off("click");B.find(".searchResultArticle").off("click");w.off("pageChange",void 0,g);cxdCmp.layout.activateSidebarFeature(p,!1)};this.fit=function(a){k(cxdCmp.flipbook.currentPageIx(),a)};this.init=function(a){d();m(a)};(function(){h.off("keydown").on("keydown",function(a){t.searchInProgress||13!==a.keyCode||f()});u.off("click").on("click",function(a){t.searchInProgress||f()});C.off("click").on("click",
function(){d()});w.on("pageChange",void 0,g)})();z.html(cxdCmp.i18n.i18n("search.label.tooShort"))}})();